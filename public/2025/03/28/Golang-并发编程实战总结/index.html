<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="x5-fullscreen" content="true">
<meta name="full-screen" content="yes">
<meta name="theme-color" content="#317EFB" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=0" name="viewport">
<meta name="description" content="Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªìÁõÆÂΩï  Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã ChannelÊòØ‰ªÄ‰πà SelectÁöÑÁî®Ê≥ï ‰ΩøÁî®syncÂåÖ WaitGroup Pool Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π    Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã„ÄêÊÄùËÄÉü§î„Äë‚æ∏ÂÖàÊÄùËÄÉ‚ºÄ‰∏™ÈóÆÈ¢ò‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂçèÁ®ãÔºü ÂÖ∂ÂÆûÁ≠îÊ°à‰πüÂæàÊòéÊòæÔºöÂú®Â§öËøõÁ®ãÂíåÂ§öÁ∫øÁ®ãÊó∂‰ª£ÔºåCPU ÂÜÖÊ†∏Ë¥üË¥£Ë∞ÉÂ∫¶Ôºå‰∏∫Á≥ªÁªüÊèê‰æõÂπ∂ÂèëÂ§ÑÁêÜËÉΩ‚ºíÔºå‰ΩÜ‰πüÂ≠òÂú®‚ºÄ‰∫õÁº∫ÁÇπÔºö  ËµÑÊ∫êÊ∂àËÄó‚æºÔºöËøõÁ®ãÂíåÁ∫ø">
<meta property="og:type" content="article">
<meta property="og:title" content="Golang Âπ∂ÂèëÁºñÁ®ãÂÆûÊàòÊÄªÁªì">
<meta property="og:url" content="https://herongwei.me/2025/03/28/Golang-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªìÁõÆÂΩï  Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã ChannelÊòØ‰ªÄ‰πà SelectÁöÑÁî®Ê≥ï ‰ΩøÁî®syncÂåÖ WaitGroup Pool Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π    Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã„ÄêÊÄùËÄÉü§î„Äë‚æ∏ÂÖàÊÄùËÄÉ‚ºÄ‰∏™ÈóÆÈ¢ò‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂçèÁ®ãÔºü ÂÖ∂ÂÆûÁ≠îÊ°à‰πüÂæàÊòéÊòæÔºöÂú®Â§öËøõÁ®ãÂíåÂ§öÁ∫øÁ®ãÊó∂‰ª£ÔºåCPU ÂÜÖÊ†∏Ë¥üË¥£Ë∞ÉÂ∫¶Ôºå‰∏∫Á≥ªÁªüÊèê‰æõÂπ∂ÂèëÂ§ÑÁêÜËÉΩ‚ºíÔºå‰ΩÜ‰πüÂ≠òÂú®‚ºÄ‰∫õÁº∫ÁÇπÔºö  ËµÑÊ∫êÊ∂àËÄó‚æºÔºöËøõÁ®ãÂíåÁ∫ø">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-03-28T08:12:34.000Z">
<meta property="article:modified_time" content="2025-03-28T08:16:07.392Z">
<meta property="article:author" content="Ë¥∫ÂêåÂ≠¶">
<meta property="article:tag" content="golang">
<meta name="twitter:card" content="summary">


<title >Golang Âπ∂ÂèëÁºñÁ®ãÂÆûÊàòÊÄªÁªì</title>

<!-- Favicon -->

    <link href='/log.svg?v=2.0.8' rel='icon' type='image/png' sizes='16x16' ></link>


    <link href='/log.svg?v=2.0.8' rel='icon' type='image/png' sizes='32x32' ></link>


    <link href='/apple-touch-icon.png?v=2.0.8' rel='apple-touch-icon' sizes='180x180' ></link>


    <link href='/site.webmanifest' rel='manifest' ></link>


<!-- Plugin -->




    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-theme-async@2.0.8/source/css/plugins/bootstrap.row.css">

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css">

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css">

    
    




<!-- Icon -->

    
<link rel="stylesheet" href="/css/plugins/font-awesome.min.css">




<!-- Variable -->
<script>window.ASYNC_CONFIG = {"hostname":"herongwei.me","author":"Ë¥∫ÂêåÂ≠¶","root":"/","typed_text":["Backend Developer"],"theme_version":"2.0.8","theme":{"switch":true,"default":"style-light","theme":"async"},"favicon":{"logo":"log.svg","icon16":"log.svg","icon32":"log.svg","appleTouchIcon":"apple-touch-icon.png","webmanifest":"/site.webmanifest","visibilitychange":true,"hidden":"failure.ico","showText":"(/‚âß‚ñΩ‚â¶/)Âí¶ÔºÅÂèàÂ•Ω‰∫ÜÔºÅ","hideText":"(‚óè‚Äî‚óè)ÂñîÂìüÔºåÂ¥©Ê∫ÉÂï¶ÔºÅ"},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms","author":"Post author: ","copyright_link":"Post link: ","copyright_license_title":"Copyright Notice: ","copyright_license_content":"All articles in this blog are licensed under undefined unless otherwise stated.","copy_success":"Copied","copy_failure":"Copy failed","open_read_mode":"Enter reading mode","exit_read_mode":"Exit reading mode","notice_outdate_message":"It has been undefined days since the last update, the content of the article may be outdated.","just":"Just","min":"minutes ago","hour":"hours ago","day":"days ago","month":"months ago"},"swup":false,"plugin":{"flickr_justified_gallery":"https://cdn.jsdelivr.net/npm/flickr-justified-gallery@latest/dist/fjGallery.min.js"},"icons":{"sun":"far fa-sun","moon":"far fa-moon","play":"fas fa-play","email":"far fa-envelope","next":"fas fa-arrow-right","calendar":"far fa-calendar-alt","clock":"far fa-clock","user":"far fa-user","back_top":"fas fa-arrow-up","close":"fas fa-times","search":"fas fa-search","reward":"fas fa-hand-holding-usd","user_tag":"fas fa-user-alt","toc_tag":"fas fa-th-list","read":"fas fa-book-reader","arrows":"fas fa-arrows-alt-h","double_arrows":"fas fa-angle-double-down","copy":"fas fa-copy"},"icontype":"font","highlight":{"plugin":"highlighjs","theme":true,"copy":true,"lang":true,"title":"default","height_limit":200},"creative_commons":{"license":"by-nc-sa","language":"deed.zh"}};</script>
<script id="async-page-config">window.PAGE_CONFIG = {"isPost":true,"isHome":false,"postUpdate":"2025-03-28 16:16:07"};</script>

<!-- Theme mode css -->
<link data-swup-theme rel="stylesheet" href="/css/index.css?v=2.0.8" id="trm-switch-style">
<script>
    let defaultMode = ASYNC_CONFIG.theme.default !=='auto' ?  ASYNC_CONFIG.theme.default : (window.matchMedia("(prefers-color-scheme: light)").matches ? 'style-light' : 'style-dark')
    let catchMode = localStorage.getItem('theme-mode') || defaultMode;
    let type = catchMode === 'style-dark' ? 'add' : 'remove';
    document.documentElement.classList[type]('dark')
</script>

<!-- CDN -->


    
    



<!-- Site Analytics -->
 
<meta name="generator" content="Hexo 6.3.0"></head>

<body>

  <!-- app wrapper -->
  <div class="trm-app-frame">

    <!-- page preloader -->
    <div class="trm-preloader">
    <div class="trm-holder">
        <div class="preloader">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
</div>
    <!-- page preloader end -->

    <!-- change mode preloader -->
    <div class="trm-mode-swich-animation-frame">
    <div class="trm-mode-swich-animation">
        <i class="i-sun"><i class="iconfont far fa-sun"></i></i>
        <div class="trm-horizon"></div>
        <i class="i-moon"><i class="iconfont far fa-moon"></i></i>
    </div>
</div>
    <!-- change mode preloader end -->

      <!-- scroll container -->
      <div id="trm-dynamic-content" class="trm-swup-animation">
        <div id="trm-scroll-container" class="trm-scroll-container" data-scroll-container style="opacity: 0">
          <div data-scroll-section id="content" class="trm-scroll-section">

            <div class="locomotive-scroll__sticky-target" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none;"></div>

            <!-- top bar -->
            <header class="trm-top-bar" data-scroll data-scroll-sticky data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="-10">
	<div class="container">
		<div class="trm-left-side">
			<!-- logo -->
<a href="/" class="trm-logo-frame trm-anima-link">
    
        <img alt="logo" src="/log.svg">
    
    
        <div class="trm-logo-text">
            Á®ãÂ∫èÂëòË¥∫<span>ÂêåÂ≠¶„ÅÆÂçöÂÆ¢</span>
        </div>
    
</a>
<!-- logo end -->
		</div>
		<div class="trm-right-side">
			<!-- menu -->
<div class="trm-menu">
    <nav>
        <ul>
            
            <li class="menu-item-has-children ">
                <a  href="/" target="">
                    È¶ñÈ°µ
                </a>
                
                <ul>
                    
                    <li>
                        <a  href="/archives2/" target="">
                            archives2
                        </a>
                    </li>
                    
                </ul>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/archives/" target="">
                    ÂΩíÊ°£
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/categories/" target="">
                    ÂàÜÁ±ª
                </a>
                
            </li>
            
            <li class="menu-item-has-children ">
                <a  href="/about/" target="">
                    ÂÖ≥‰∫é
                </a>
                
            </li>
            
        </ul>
    </nav>
</div>
<!-- menu end -->
			
    <!-- mode switcher place -->
    <div class="trm-mode-switcher-place">
        <div class="trm-mode-switcher">
            <i class="iconfont far fa-sun"></i>
            <input class="tgl tgl-light" id="trm-swich" type="checkbox">
            <label class="trm-swich" for="trm-swich"></label>
            <i class="iconfont far fa-moon"></i>
        </div>
    </div>
    <!-- mode switcher place end -->

			
		</div>
		<div class="trm-menu-btn">
			<span></span>
		</div>
	</div>
</header>
            <!-- top bar end -->

            <!-- body -->
            
<div class="trm-content-start">
    <!-- banner -->
    <div class="trm-banner" data-scroll data-scroll-direction="vertical">
    
    <!-- banner cover -->
    <img style="object-position:top;object-fit:cover;" alt="banner" class="trm-banner-cover" data-scroll data-scroll-direction="vertical" data-scroll-speed="-3" src="/img/banner.png">
    <!-- banner cover end -->
    

    <!-- banner content -->
    <div class="trm-banner-content trm-overlay">
        <div class="container" data-scroll data-scroll-direction="vertical" data-scroll-speed="0">
            <div class="row">
                
                <div class="col-lg-4"></div>
                
                <div class="col-lg-8">

                    <!-- banner title -->
                    <div class="trm-banner-text ">
                        <div class="trm-label trm-mb-20">
                            NEWS LETTER
                        </div>
                        <h1 class="trm-mb-30 trm-hsmb-font">
                            Golang Âπ∂ÂèëÁºñÁ®ãÂÆûÊàòÊÄªÁªì
                        </h1>

                        
                            <ul class="trm-breadcrumbs trm-label">
                                <li>
                                    <a href="/" class="trm-anima-link">Home</a>
                                </li>
                                <li>
                                    <span>
                                        2025
                                    </span
                                ></li>
                            </ul>
                        
                    </div>
                    <!-- banner title end -->

                    <!-- scroll hint -->
                    <a href="#about-triger" data-scroll-to="#about-triger" data-scroll-offset="-130" class="trm-scroll-hint-frame">
                        <div class="trm-scroll-hint"></div>
                        <span class="trm-label">Scroll down</span>
                    </a>
                    <!-- scroll hint end -->

                </div>
            </div>
        </div>
    </div>
    <!-- banner content end -->
</div>
    <!-- banner end -->
    <div class="container">
        <div class="row">
            
                <div id="page-sidebar" class="col-lg-4 hidden-sm">
                    <!-- main card -->
                    

<div class="trm-main-card-frame trm-sidebar">
    <div class="trm-main-card" data-scroll data-scroll-repeat data-scroll-sticky data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="60"> 
    
        <div class="trm-user-tabs" id="sidebar-tabs">
           <div class="trm-tabs-nav trm-mb-40" id="trm-tabs-nav">
                <div data-to="tabs-user" class="trm-tabs-nav-item">
                    <i class="iconfont fas fa-user-alt"></i>
                </div>
                <div data-to="tabs-toc" class="trm-tabs-nav-item active">
                    <i class="iconfont fas fa-th-list"></i>
                </div>
           </div>
            <div name="tabs-user" class="trm-tabs-item">
                <!-- card header -->
<div class="trm-mc-header">
    <div class="trm-avatar-frame trm-mb-20">
        <img alt="Avatar" class="trm-avatar" src="/img/avatar.jpg">
    </div>
    <h5 class="trm-name trm-mb-15">
        Á®ãÂ∫èÂëòË¥∫ÂêåÂ≠¶
    </h5>
    
        <div class="trm-label">
            I`m
            <span class="trm-typed-text">
                <!-- Words for theme.user.typedText -->
            </span>
        </div>
    
</div>
<!-- card header end -->
                <!-- sidebar social -->

<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<div class="trm-social">
    
        <a href="https://github.com/rongweihe" title="github" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-github"></i>
        </a>
    
        <a href="https://gitee.com/rongweihe" title="gitee" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-gitlab"></i>
        </a>
    
        <a href="https://www.zhihu.com/people/herongwei" title="zhihu" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-zhihu"></i>
        </a>
    
        <a href="https://space.bilibili.com/25944369" title="bilibili" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-youtube"></i>
        </a>
    
        <a href="https://i.328888.xyz/2023/04/09/iciz4J.md.jpeg" title="weichat" rel="nofollow" target="_blank">
            <i class="iconfont fab fa-weixin"></i>
        </a>
    
</div>

<!-- sidebar social end -->
                <!-- info -->
<div class="trm-divider trm-mb-40 trm-mt-40"></div>
<ul class="trm-table trm-mb-20">
    
        <li>
            <div class="trm-label">
                Residence:
            </div>
            <div class="trm-label trm-label-light">
                Mars
            </div>
        </li>
    
</ul>
<!-- info end -->

                
    <div class="trm-divider trm-mb-40 trm-mt-40"></div>
    <!-- action button -->
    <div class="text-center">
        <a href="mailto:1952281585@qq.com" class="trm-btn">
            Contact Me
            <i class="iconfont far fa-envelope"></i>
        </a>
    </div>
    <!-- action button end -->

            </div>
            <div name="tabs-toc" class="trm-tabs-item active">
                <div class="post-toc">
    <ol class="toc"><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#Golang-Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì"  data-scroll-to="#Golang-Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì"><span class="toc-number">1.</span> <span class="toc-text">Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì</span></a></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã"  data-scroll-to="#Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã"><span class="toc-number">2.</span> <span class="toc-text">Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã</span></a></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü"  data-scroll-to="#ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü"><span class="toc-number">3.</span> <span class="toc-text">ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Channel-ÁöÑ‰ΩúÁî®"  data-scroll-to="#Channel-ÁöÑ‰ΩúÁî®"><span class="toc-number">3.1.</span> <span class="toc-text">Channel ÁöÑ‰ΩúÁî®</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Channel-ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"  data-scroll-to="#Channel-ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"><span class="toc-number">3.2.</span> <span class="toc-text">Channel ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤"  data-scroll-to="#ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤"><span class="toc-number">3.3.</span> <span class="toc-text">ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤</span></a></li></ol></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#SelectÁöÑÁî®Ê≥ï"  data-scroll-to="#SelectÁöÑÁî®Ê≥ï"><span class="toc-number">4.</span> <span class="toc-text">SelectÁöÑÁî®Ê≥ï</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#ÂÖ≥ÈîÆÁÇπ"  data-scroll-to="#ÂÖ≥ÈîÆÁÇπ"><span class="toc-number">4.1.</span> <span class="toc-text">ÂÖ≥ÈîÆÁÇπ</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Ê≥®ÊÑè‰∫ãÈ°π"  data-scroll-to="#Ê≥®ÊÑè‰∫ãÈ°π"><span class="toc-number">4.2.</span> <span class="toc-text">Ê≥®ÊÑè‰∫ãÈ°π</span></a></li></ol></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#‰ΩøÁî®syncÂåÖ"  data-scroll-to="#‰ΩøÁî®syncÂåÖ"><span class="toc-number">5.</span> <span class="toc-text">‰ΩøÁî®syncÂåÖ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Map"  data-scroll-to="#Map"><span class="toc-number">5.1.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã"  data-scroll-to="#Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã"><span class="toc-number">5.2.</span> <span class="toc-text">Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#sync-Once"  data-scroll-to="#sync-Once"><span class="toc-number">5.3.</span> <span class="toc-text">sync.Once</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Âü∫Êú¨Áî®Ê≥ï"  data-scroll-to="#Âü∫Êú¨Áî®Ê≥ï"><span class="toc-number">5.3.1.</span> <span class="toc-text">Âü∫Êú¨Áî®Ê≥ï</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Ê≥®ÊÑè‰∫ãÈ°π-1"  data-scroll-to="#Ê≥®ÊÑè‰∫ãÈ°π-1"><span class="toc-number">5.3.2.</span> <span class="toc-text">Ê≥®ÊÑè‰∫ãÈ°π</span></a></li></ol></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#ÂâçË®Ä"  data-scroll-to="#ÂâçË®Ä"><span class="toc-number">5.4.</span> <span class="toc-text">ÂâçË®Ä</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Goroutine-‰∏é-Channel"  data-scroll-to="#Goroutine-‰∏é-Channel"><span class="toc-number">5.5.</span> <span class="toc-text">Goroutine ‰∏é Channel</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Select-ÁöÑÁî®Ê≥ï"  data-scroll-to="#Select-ÁöÑÁî®Ê≥ï"><span class="toc-number">5.6.</span> <span class="toc-text">Select ÁöÑÁî®Ê≥ï</span></a></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#‰ΩøÁî®-sync-ÂåÖ"  data-scroll-to="#‰ΩøÁî®-sync-ÂåÖ"><span class="toc-number">5.7.</span> <span class="toc-text">‰ΩøÁî® sync ÂåÖ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Map-1"  data-scroll-to="#Map-1"><span class="toc-number">5.7.1.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Mutex"  data-scroll-to="#Mutex"><span class="toc-number">5.7.2.</span> <span class="toc-text">Mutex</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#RWMutex"  data-scroll-to="#RWMutex"><span class="toc-number">5.7.3.</span> <span class="toc-text">RWMutex</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Once"  data-scroll-to="#Once"><span class="toc-number">5.7.4.</span> <span class="toc-text">Once</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#Pool"  data-scroll-to="#Pool"><span class="toc-number">6.</span> <span class="toc-text">Pool</span></a></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#WaitGroup"  data-scroll-to="#WaitGroup"><span class="toc-number">7.</span> <span class="toc-text">WaitGroup</span></a></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#Context"  data-scroll-to="#Context"><span class="toc-number">8.</span> <span class="toc-text">Context</span></a></li><li class="toc-item toc-level-1"><a rel="nofollow" class="toc-link" href="#Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π"  data-scroll-to="#Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π"><span class="toc-number">9.</span> <span class="toc-text">Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Ê≥®ÊÑè‰∫ãÈ°π-2"  data-scroll-to="#Ê≥®ÊÑè‰∫ãÈ°π-2"><span class="toc-number">9.1.</span> <span class="toc-text">Ê≥®ÊÑè‰∫ãÈ°π</span></a></li></ol></li></ol>
</div>
            </div>
        </div>
    
    </div>
</div>
                    <!-- main card end -->
                </div>
            
            <div id="page-content" class="col-lg-8">
                <div class="trm-content" id="trm-content">
                    <div data-scroll data-scroll-repeat data-scroll-offset="500" id="about-triger"></div>

                    <div id="post-info" class="row hidden-sm">
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-calendar-alt trm-icon"></i><br>
            03/28
        </div>
    </div>
    <div class="col-sm-4">
        <div class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-clock trm-icon"></i><br>
            16:12
        </div>
    </div>
    <div class="col-sm-4">
        <div id="post-author" class="trm-card trm-label trm-label-light text-center">
            <i class="iconfont far fa-user trm-icon"></i><br>
            Ë¥∫ÂêåÂ≠¶
        </div>
    </div>
</div>
<div class="trm-card ">
    <article id="article-container" class="trm-publication">
    <h1 id="Golang-Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì"><a href="#Golang-Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì" class="headerlink" title="Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì"></a>Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì</h1><p>ÁõÆÂΩï</p>
<ul>
<li><a href="#golang-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93">Golang Âπ∂ÂèëÁºñÁ®ãÂÆûË∑µÊÄªÁªì</a><ul>
<li><a href="#%E6%B7%B1%E2%BC%8A%E7%90%86%E8%A7%A3GMP%E6%A8%A1%E5%9E%8B">Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã</a></li>
<li><a href="#Channel%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F%E5%BA%95%E5%B1%82%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F">ChannelÊòØ‰ªÄ‰πà</a></li>
<li><a href="#Select%E7%9A%84%E7%94%A8%E6%B3%95">SelectÁöÑÁî®Ê≥ï</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8sync%E5%8C%85">‰ΩøÁî®syncÂåÖ</a></li>
<li><a href="#WaitGroup">WaitGroup</a></li>
<li><a href="#Pool">Pool</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π</a></li>
</ul>
</li>
</ul>
<h1 id="Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã"><a href="#Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã" class="headerlink" title="Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã"></a>Ê∑±‚ºäÁêÜËß£GMPÊ®°Âûã</h1><p><strong>„ÄêÊÄùËÄÉü§î„Äë‚æ∏ÂÖàÊÄùËÄÉ‚ºÄ‰∏™ÈóÆÈ¢ò‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂçèÁ®ãÔºü</strong></p>
<p>ÂÖ∂ÂÆûÁ≠îÊ°à‰πüÂæàÊòéÊòæÔºöÂú®Â§öËøõÁ®ãÂíåÂ§öÁ∫øÁ®ãÊó∂‰ª£ÔºåCPU ÂÜÖÊ†∏Ë¥üË¥£Ë∞ÉÂ∫¶Ôºå‰∏∫Á≥ªÁªüÊèê‰æõÂπ∂ÂèëÂ§ÑÁêÜËÉΩ‚ºíÔºå‰ΩÜ‰πüÂ≠òÂú®‚ºÄ‰∫õÁº∫ÁÇπÔºö</p>
<ul>
<li><p>ËµÑÊ∫êÊ∂àËÄó‚æºÔºöËøõÁ®ãÂíåÁ∫øÁ®ãÁöÑÂàõÂª∫„ÄÅÂàáÊç¢ÂíåÈîÄÊØÅÈÉΩ‰ºöÊ∂àËÄó‚º§Èáè CPU ËµÑÊ∫ê„ÄÇ</p>
</li>
<li><p>ÂÜÖÂ≠òÂç†‚Ω§‚º§ÔºöÊØè‰∏™Á∫øÁ®ãÁ∫¶ÈúÄ 4MB ÂÜÖÂ≠òÔºå‚º§ÈáèÁ∫øÁ®ã‰ºöÂØºËá¥ÂÜÖÂ≠òÊ∂àËÄóËøá‚æº„ÄÇ</p>
</li>
<li><p>Â∫î‚Ω§Â±Ç‚ΩÜÊ≥ïÁõ¥Êé•ÊéßÂà∂ÂÜÖÊ†∏Ë∞ÉÂ∫¶ÔºåÂè™ËÉΩÈÄöËøáÂáèÂ∞ëÁ∫øÁ®ãÂàõÂª∫ÂíåÂàáÊç¢Êù•‰ºòÂåñÊÄßËÉΩ„ÄÇ</p>
</li>
</ul>
<p>Ëøô‰øÉ‚Ω£‰∫ÜÂçèÁ®ãÁöÑÊ¶ÇÂøµÔºö‚Ω§Êà∑Á∫ßÂà´ÁöÑËΩªÈáèÁ∫øÁ®ã„ÄÇÂú® Go ‰∏≠ÔºåÂçèÁ®ãË¢´Áß∞‰∏∫ <code>goroutine</code>ÔºåÂÆÉ‰∏ªË¶ÅËß£ÂÜ≥‰∫ÜÂÜÖÊ†∏Á∫øÁ®ãÁöÑ‰∏§‰∏™‚ÄúÂ§™Èáç‚ÄùÈóÆÈ¢òÔºö</p>
<ul>
<li>ÂàõÂª∫ÂíåÂàáÊç¢Ôºö<code>goroutine</code>  Âú®‚Ω§Êà∑ÊÄÅÂàõÂª∫ÂíåÂàáÊç¢Ôºå‚ΩÜÈúÄËøõ‚ºäÂÜÖÊ†∏ÔºåÂºÄÈîÄ‚ΩêÁ∫øÁ®ã‚º©ÂæóÂ§ö„ÄÇ</li>
<li>ÂÜÖÂ≠òÂç†‚Ω§Ôºö<code>goroutine</code>  ÁöÑÂàùÂßãÊ†àÂè™Êúâ 2KBÔºåÊ†àÁ©∫Èó¥ÂèØÂä®ÊÄÅÊâ©Â±ïÊàñÊî∂Áº©ÔºåÈÅøÂÖç‰∫ÜÂÜÖÂ≠òÊµ™Ë¥π‰∏éÊ†àÊ∫¢Âá∫‚ªõÈô©„ÄÇ</li>
<li>Áî±‰∫é <code>goroutine</code>  ÁöÑËΩªÈáèÁâπÊÄßÔºåGo Á®ãÂ∫èÂèØ‰ª•ËΩªÊùæÂàõÂª∫ÊàêÂçÉ‰∏ä‰∏á‰∏™Âπ∂Âèë‰ªªÂä°Ôºå‚ΩΩ‰∏ç‚Ω§ÊãÖ‚ººÊÄßËÉΩÂíåÂÜÖÂ≠òÈóÆÈ¢ò„ÄÇ</li>
</ul>
<p><strong>„ÄêÊÄùËÄÉü§î „ÄëÁ¨¨‚ºÜ‰∏™ÈóÆÈ¢òÔºö</strong>golang <strong>ÂèØ‰ª•Âú®‚Ω§Êà∑Á∫ßÂà´Á©∫Èó¥ÂàõÂª∫ÂçèÁ®ãÂ∫ïÂ±ÇÊòØÈù†‰ªÄ‰πàÂÆûÁé∞ÁöÑ</strong>?</p>
<p>ÂÖ∂ÂÆûÊòØËôΩÁÑ∂ÂçèÁ®ãÂú®‚Ω§Êà∑ÊÄÅÁ©∫Èó¥Ëøê‚æèÔºå‰ΩÜÂÖ∂Â∫ïÂ±ÇÂÆûÁé∞‰æùËµñ‰∫éGoËøê‚æèÊó∂ÂØπÊìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÔºàOS ThreadsÔºâÁöÑÁÆ°ÁêÜÂíåË∞ÉÂ∫¶„ÄÇ</p>
<p>ÂÖ∑‰ΩìÊù•ËØ¥ÔºöGo ÂçèÁ®ãËøê‚æèÂú®‚Ω§Êà∑ÊÄÅÁ©∫Èó¥Ôºå‰ΩÜÂÆÉ‰ª¨Âπ∂‰∏çÊòØÁõ¥Êé•Áî±Êìç‰ΩúÁ≥ªÁªüË∞ÉÂ∫¶ÁöÑÁ∫øÁ®ã„ÄÇÁõ∏ÂèçÔºå<strong>Go <strong>Ëøê‚æèÊó∂ÈÄöËøá‚ºÄ‰∏™‚Ω§Êà∑ÊÄÅÁöÑË∞ÉÂ∫¶Âô®Ôºà</strong>Scheduler</strong>ÔºâÊù•ÁÆ°ÁêÜÂçèÁ®ãÁöÑÊâß‚æèÔºåÂπ∂Â∞ÜÂçèÁ®ãÊò†Â∞ÑÂà∞Êìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ã‰∏ä„ÄÇ</p>
<ul>
<li>‚Ω§Êà∑ÊÄÅÂçèÁ®ãÔºàGoroutineÔºâÔºöËΩªÈáèÁ∫ßÁöÑÂπ∂ÂèëÂçïÂÖÉÔºåÁî±GoËøê‚æèÊó∂ÁÆ°ÁêÜ„ÄÇ</li>
<li>Êìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÔºàOS ThreadÔºâÔºöÁî±Êìç‰ΩúÁ≥ªÁªüË∞ÉÂ∫¶ÁöÑÁ∫øÁ®ãÔºå‚Ω§‰∫éÊâß‚æèGoËøê‚æèÊó∂ÁöÑ‰ª£Á†Å„ÄÇ</li>
<li>Ëøê‚æèÊó∂Ë∞ÉÂ∫¶Âô®ÔºàSchedulerÔºâÔºöË¥üË¥£Â∞ÜÂçèÁ®ãÂàÜÈÖçÂà∞Êìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ã‰∏äÊâß‚æè„ÄÇ</li>
</ul>
<p>Go Ëøê‚æèÊó∂ÁöÑË∞ÉÂ∫¶Âô®ÊòØÂçèÁ®ãÂÆûÁé∞ÁöÑÊ†∏‚ººÔºåÂÆÉÈÄöËøá‰ª•‰∏ãÁªÑ‰ª∂ÂçèÂêå‚ºØ‰ΩúÔºö</p>
<ul>
<li>GÔºàgoroutineÔºâÔºö<ul>
<li>ÊòØ‚Ω§Êà∑ÊÄÅÁ∫øÁ®ãÁöÑÊäΩË±°ÔºåÂèØ‰ª•Âú® M ‰∏äËøê‚æèÔºåÂ≠òÂÇ®‰∫éÂÖ®Â±ÄÈòüÂàóÂíå P ÁöÑÊú¨Âú∞ÈòüÂàóÔºà‚º§‚º© 256Ôºâ‰∏≠„ÄÇ</li>
<li><strong>ÁâπÁÇπÔºö</strong>GÊòØËΩªÈáèÁ∫ßÁöÑÔºåÂàõÂª∫ÂíåÈîÄÊØÅÁöÑÂºÄÈîÄÊûÅ‚º©„ÄÇ</li>
</ul>
</li>
<li>MÔºàMachineÔºâÔºö<ul>
<li>ÊòØÊìç‰ΩúÁ≥ªÁªüÁ∫øÁ®ãÁöÑÊäΩË±°Ôºå‚ºÄ‰∏™ M ‰ª£Ë°®‚ºÄ‰∏™Á∫øÁ®ãÔºåÊúÄÂ§öÁªëÂÆö‚ºÄ‰∏™ P„ÄÇM ÈòªÂ°ûÊó∂‰ºöÈáäÊîæ PÔºåÂÖÅËÆ∏ P‰∏éÂÖ∂‰ªñÁ©∫Èó≤ÁöÑ M ÁªëÂÆöÔºåÂ¶ÇÊûúÊ≤°ÊúâÁ©∫Èó≤ÁöÑ MÔºåÂàôÂàõÂª∫Êñ∞ÁöÑ M„ÄÇ</li>
<li><strong>ÁâπÁÇπÔºö</strong>MÁöÑÊï∞ÈáèÈÄöÂ∏∏ËøúÂ∞ë‰∫éGÁöÑÊï∞ÈáèÔºåÁî±GoËøê‚æèÊó∂Âä®ÊÄÅÁÆ°ÁêÜ„ÄÇ</li>
</ul>
</li>
<li>PÔºàProcessorÔºâÔºö<ul>
<li>ÈÄªËæëÂ§ÑÁêÜÂô®ÔºåÊäΩË±°‰ª£Ë°® CPU Ê†∏‚ºº„ÄÇP ÁöÑÊï∞ÈáèÂÜ≥ÂÆö‰∫ÜÁ®ãÂ∫èÁöÑÂπ∂‚æèËÉΩ‚ºíÔºåÂèØ‰ª•ÈÄöËøá GOMAXPROCS ËÆæÁΩÆ„ÄÇÊØè‰∏™ M ÈúÄË¶ÅÁªëÂÆö‚ºÄ‰∏™ P Ëøõ‚æè‰ªªÂä°Ë∞ÉÂ∫¶„ÄÇÊòØ M Âíå G ‰πãÈó¥ÁöÑÊ°•Ê¢Å„ÄÇÊØè‰∏™ P ÈÉΩÊúâ‚ºÄ‰∏™Êú¨Âú∞ÁöÑ Goroutine ÈòüÂàóÔºåÂêåÊó∂‰πüÂèØ‰ª•ËÆøÈóÆÂÖ®Â±ÄÁöÑ Goroutine ÈòüÂàó„ÄÇP Ë¥üË¥£Ë∞ÉÂ∫¶ÂíåÁÆ°ÁêÜ Goroutine ÁöÑÊâß‚æèÔºåÂÜ≥ÂÆöÂì™‰∏™ Goroutine Â∫îËØ•Âú®Âì™‰∏™ M ‰∏äËøê‚æè„ÄÇ</li>
<li><strong>ÁâπÁÇπÔºö</strong> PÁöÑÊï∞ÈáèÈÄöÂ∏∏‰∏éCPUÊ†∏‚ººÊï∞Áõ∏ÂåπÈÖçÔºå‚Ω§‰∫éÂÖÖÂàÜÂà©‚Ω§Â§öÊ†∏CPUÁöÑËÆ°ÁÆóËÉΩ‚ºí„ÄÇ</li>
</ul>
</li>
</ul>
<p>GoËøê‚æèÊó∂ÁöÑË∞ÉÂ∫¶Âô®ÈÄöËøá‰ª•‰∏ãÊ≠•È™§ÁÆ°ÁêÜÂçèÁ®ãÁöÑÊâß‚æèÔºö</p>
<ul>
<li>ÂàõÂª∫ÂçèÁ®ãÔºöÂΩìË∞É‚Ω§go func()Êó∂ÔºåGoËøê‚æèÊó∂‰ºöÂàõÂª∫‚ºÄ‰∏™Êñ∞ÁöÑGÔºåÂπ∂Â∞ÜÂÖ∂Âä†‚ºäÂà∞Ë∞ÉÂ∫¶ÈòüÂàó‰∏≠„ÄÇ</li>
<li>Ë∞ÉÂ∫¶ÂçèÁ®ãÔºöË∞ÉÂ∫¶Âô®‰ªéÈòüÂàó‰∏≠ÂèñÂá∫GÔºåÂπ∂Â∞ÜÂÖ∂ÂàÜÈÖçÁªô‚ºÄ‰∏™P„ÄÇPÂ∞ÜGÁªëÂÆöÂà∞‚ºÄ‰∏™M‰∏äÔºåMÂºÄÂßãÊâß‚æèG‰∏≠ÁöÑ‰ª£Á†Å„ÄÇ</li>
</ul>
<p>ÈòªÂ°û‰∏éÂî§ÈÜí</p>
<ul>
<li>Â¶ÇÊûúGÂú®Êâß‚æèËøáÁ®ã‰∏≠ÈòªÂ°ûÔºàÂ¶ÇÁ≠âÂæÖI&#x2F;OÊìç‰ΩúÔºâÔºåË∞ÉÂ∫¶Âô®‰ºöÂ∞ÜËØ•GÊåÇËµ∑ÔºåÂπ∂‰ªéÈòüÂàó‰∏≠ÂèñÂá∫Âè¶‚ºÄ‰∏™GÁªßÁª≠Êâß‚æè„ÄÇ</li>
<li>ÂΩìÈòªÂ°ûÁöÑGË¢´Âî§ÈÜíÊó∂ÔºåË∞ÉÂ∫¶Âô®‰ºöÂ∞ÜÂÖ∂ÈáçÊñ∞Âä†‚ºäÂà∞ÈòüÂàó‰∏≠ÔºåÁ≠âÂæÖÊâß‚æè„ÄÇ</li>
</ul>
<p>Á∫øÁ®ãÂ§ç‚Ω§Ôºö</p>
<ul>
<li>Â¶ÇÊûúÊâÄÊúâMÈÉΩË¢´ÈòªÂ°ûÔºåË∞ÉÂ∫¶Âô®‰ºöÂàõÂª∫Êñ∞ÁöÑMÊù•Êâß‚æèÈòüÂàó‰∏≠ÁöÑG„ÄÇ</li>
<li>Â¶ÇÊûúÊüê‰∏™MÂÆåÊàê‰ªªÂä°ÔºåË∞ÉÂ∫¶Âô®‰ºöÂ∞ÜËØ•MÂõûÊî∂Ôºå‚Ω§‰∫éÊâß‚æèÂÖ∂‰ªñG„ÄÇ</li>
</ul>
<p>GMP Ê®°ÂûãÂºï‚ºä‰∫Ü P Êù•Ëß£ÂÜ≥ GM Ê®°ÂûãÁöÑÁº∫Èô∑Ôºö</p>
<ul>
<li>‚ΩÜÈîÅËÆøÈóÆÊú¨Âú∞ÈòüÂàóÔºöP ‰øùÂ≠ò goroutine ÁöÑÊú¨Âú∞ÈòüÂàóÔºåM ‰ºòÂÖà‰ªé P ÁöÑÊú¨Âú∞ÈòüÂàó‰∏≠Âèñ G Êâß‚æèÔºå‰ªÖÂøÖË¶ÅÊó∂ËÆøÈóÆÂÖ®Â±ÄÈòüÂàóÔºåÂáèÂ∞ë‰∫ÜÈîÅÁ´û‰∫âÔºåÊèêÂçá‰∫ÜÂπ∂ÂèëÊÄß„ÄÇ</li>
<li>‰ºòÂåñÊï∞ÊçÆÂ±ÄÈÉ®ÊÄßÔºöÊñ∞ÂàõÂª∫ÁöÑ G ‰ºö‰ºòÂÖàÊîæ‚ºäÂàõÂª∫ÂÆÉÁöÑ M ÁªëÂÆöÁöÑ P ÁöÑÊú¨Âú∞ÈòüÂàó‰∏≠ÔºåÈÅøÂÖçÈ¢ëÁπÅÁöÑÊï∞ÊçÆ‰∫§‰∫íÔºåÊèêÂçáÂÜÖÂ≠ò‰Ωø‚Ω§ÊïàÁéá„ÄÇ</li>
<li>Hand Off ‰∫§Êé•Êú∫Âà∂ÔºöM ÈòªÂ°ûÊó∂ÔºåÂ∞ÜÁªëÂÆöÁöÑ P ÂíåÂÖ∂‰ªªÂä°‰∫§ÁªôÂÖ∂‰ªñ MÔºåÊèêÂçá‰∫ÜËµÑÊ∫êÂà©‚Ω§ÁéáÂíåÂπ∂ÂèëÂ∫¶„ÄÇ</li>
</ul>
<p>GMP Ë∞ÉÂ∫¶Êó∂Êú∫Ôºö‰ªãÁªç GMP ÁöÑË∞ÉÂ∫¶Êó∂Êú∫Ôºå‰∏ªË¶ÅÂàÜ‰∏∫Ê≠£Â∏∏Ë∞ÉÂ∫¶„ÄÅ‰∏ªÂä®Ë∞ÉÂ∫¶„ÄÅË¢´Âä®Ë∞ÉÂ∫¶ÂíåÊä¢Âç†Ë∞ÉÂ∫¶ÂõõÁßçÊÉÖÂÜµ</p>
<p>ÂÖ∑‰ΩìË∞ÉÂ∫¶ËøáÁ®ã</p>
<ul>
<li><p><strong>ÂàõÂª∫</strong> GoroutineÔºöÂΩì‰Ωø‚Ω§ go ÂÖ≥ÈîÆÂ≠óÂàõÂª∫‚ºÄ‰∏™Êñ∞ÁöÑ Goroutine Êó∂ÔºåGo Ëøê‚æèÊó∂‰ºö‰∏∫ÂÖ∂ÂàÜÈÖç‚ºÄ‰∏™ G ÂØπË±°ÔºåÂπ∂Â∞ÜÂÖ∂Êîæ‚ºäÂÖ®Â±ÄÊàñÊüê‰∏™ P ÁöÑÊú¨Âú∞ Goroutine ÈòüÂàó‰∏≠„ÄÇ</p>
</li>
<li><p><strong>Ë∞ÉÂ∫¶</strong> Goroutine <strong>Âà∞</strong> M <strong>‰∏äÊâß‚æè</strong>ÔºöM ‰ºö‰ªé P ÁöÑÊú¨Âú∞ÈòüÂàóÊàñÂÖ®Â±ÄÈòüÂàó‰∏≠Ëé∑Âèñ‚ºÄ‰∏™ GÔºåÂπ∂Â∞ÜÂÖ∂ÁªëÂÆöÂà∞‚æÉ‚º∞Ë∫´‰∏äÊâß‚æè„ÄÇÂ¶ÇÊûú P ÁöÑÊú¨Âú∞ÈòüÂàó‰∏∫Á©∫ÔºåM ‰ºöÂ∞ùËØï‰ªéÂÖ∂‰ªñ P ÁöÑÊú¨Âú∞ÈòüÂàó‰∏≠ ‚ÄúÂÅ∑Âèñ‚Äù ‚ºÄ‰∫õ G Êù•Êâß‚æèÔºåËøôÁßçÊú∫Âà∂Áß∞‰∏∫ ‚Äú‚ºØ‰ΩúÁ™ÉÂèñ‚ÄùÔºåÂèØ‰ª•Êèê‚æºË∞ÉÂ∫¶ÁöÑÊïàÁéá„ÄÇ</p>
</li>
<li><p><strong>ÈòªÂ°ûÂíåÂî§ÈÜí</strong>ÔºöÂΩì‚ºÄ‰∏™ Goroutine ÈÅáÂà∞ÈòªÂ°ûÊìç‰ΩúÔºàÂ¶Ç I&#x2F;O Êìç‰Ωú„ÄÅChannel ËØªÂÜôÁ≠âÔºâÊó∂ÔºåM ‰ºöÂ∞ÜËØ• G Ê†áËÆ∞‰∏∫ÈòªÂ°ûÁä∂<strong>ÈòªÂ°ûÂíåÂî§ÈÜí</strong>ÔºöÂΩì‚ºÄ‰∏™ Goroutine ÈÅáÂà∞ÈòªÂ°ûÊìç‰ΩúÔºàÂ¶Ç I&#x2F;O Êìç‰Ωú„ÄÅChannel ËØªÂÜôÁ≠âÔºâÊó∂ÔºåM ‰ºöÂ∞ÜËØ• G Ê†áËÆ∞‰∏∫ÈòªÂ°ûÁä∂ÊÄÅÔºåÂπ∂Â∞ÜÂÖ∂‰ªéÂΩìÂâç P ÁöÑÈòüÂàó‰∏≠ÁßªÈô§„ÄÇÂêåÊó∂ÔºåM ‰ºöÁªßÁª≠‰ªéÈòüÂàó‰∏≠Ëé∑ÂèñÂÖ∂‰ªñ G Êù•Êâß‚æè„ÄÇÂΩìÈòªÂ°ûÊìç‰ΩúÂÆåÊàêÂêéÔºåG ‰ºöË¢´Âî§ÈÜíÔºåÂπ∂ÈáçÊñ∞Êîæ‚ºäÊüê‰∏™ P ÁöÑÈòüÂàó‰∏≠Á≠âÂæÖË∞ÉÂ∫¶„ÄÇ</p>
</li>
<li><p><strong>‰∏ä‰∏ã‚ΩÇÂàáÊç¢</strong>ÔºöGoroutine ÁöÑ‰∏ä‰∏ã‚ΩÇÂàáÊç¢Áî± Go Ëøê‚æèÊó∂Ë¥üË¥£Ôºå‚ΩΩ‰∏çÊòØÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏„ÄÇËøôÁßç‚Ω§Êà∑ÊÄÅÁöÑ‰∏ä‰∏ã‚ΩÇÂàáÊç¢‚ΩêÂÜÖÊ†∏ÊÄÅÁöÑ‰∏ä‰∏ã‚ΩÇÂàáÊç¢ÂºÄÈîÄ‚º©ÂæóÂ§öÔºåÂõ†Ê≠§ÂèØ‰ª•ÂÆûÁé∞‚æºÊïàÁöÑÂπ∂ÂèëË∞ÉÂ∫¶„ÄÇ</p>
</li>
</ul>
<h1 id="ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü"><a href="#ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü"></a>ChannelÊòØ‰ªÄ‰πàÔºü‰ªÄ‰πà‰ΩúÁî®ÔºüÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÊòØ‰ªÄ‰πàÔºü</h1><h2 id="Channel-ÁöÑ‰ΩúÁî®"><a href="#Channel-ÁöÑ‰ΩúÁî®" class="headerlink" title="Channel ÁöÑ‰ΩúÁî®"></a>Channel ÁöÑ‰ΩúÁî®</h2><p>Âú® Golang Âπ∂ÂèëÁºñÁ®ã‰∏≠ÔºåchannelÔºàÈÄöÈÅìÔºâÊòØ‰∏ÄÁßçÁî®‰∫é goroutine ‰πãÈó¥ÈÄö‰ø°ÂíåÂêåÊ≠•ÁöÑÊú∫Âà∂„ÄÇÂÆÉÁöÑ‰∏ªË¶Å‰ΩúÁî®ÂåÖÊã¨Ôºö</p>
<ol>
<li><strong>goroutine Èó¥ÈÄö‰ø°</strong>Ôºöchannel ÂÖÅËÆ∏‰∏çÂêåÁöÑ goroutine ‰πãÈó¥‰º†ÈÄíÊï∞ÊçÆÔºåÂÆûÁé∞Êï∞ÊçÆÁöÑÂÖ±‰∫´Âíå‰∫§Êç¢„ÄÇ</li>
<li><strong>goroutine ÂêåÊ≠•</strong>ÔºöÈÄöËøá channel ÂèØ‰ª•ÊéßÂà∂ goroutine ÁöÑÊâßË°åÈ°∫Â∫èÔºåÂÆûÁé∞ÂØπÂπ∂ÂèëÊìç‰ΩúÁöÑÂêåÊ≠•„ÄÇ</li>
</ol>
<h2 id="Channel-ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"><a href="#Channel-ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ" class="headerlink" title="Channel ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ"></a>Channel ÁöÑÂ∫ïÂ±ÇÂéüÁêÜ</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> hchan <span class="keyword">struct</span> &#123;</span><br><span class="line"></span><br><span class="line">  qcount <span class="type">uint</span> <span class="comment">// ÂΩìÂâçÁºìÂÜ≤Âå∫‰∏≠ÁöÑÂÖÉÁ¥†Êï∞Èáè</span></span><br><span class="line"></span><br><span class="line">  dataqsiz buf <span class="type">uint</span> unsafe.Pointer <span class="comment">// ÁºìÂÜ≤Âå∫‚º§‚º©Ôºà‚ΩÜÁºìÂÜ≤Âå∫Êó∂‰∏∫ 0Ôºâ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ÊåáÂêëÁºìÂÜ≤Âå∫ÁöÑÊåáÈíà</span></span><br><span class="line"></span><br><span class="line">  elemsize <span class="type">uint16</span> <span class="comment">// ÂÖÉÁ¥†‚º§‚º©</span></span><br><span class="line"></span><br><span class="line">  closed <span class="type">uint32</span> <span class="comment">// Ê†áËÆ∞ÈÄöÈÅìÊòØÂê¶Â∑≤ÂÖ≥Èó≠</span></span><br><span class="line"></span><br><span class="line">  sendx <span class="type">uint</span> <span class="comment">// ‰∏ã‚ºÄ‰∏™ÂèëÈÄÅÊìç‰ΩúÁöÑÁ¥¢Âºï</span></span><br><span class="line"></span><br><span class="line">  recvx <span class="type">uint</span> <span class="comment">// ‰∏ã‚ºÄ‰∏™Êé•Êî∂Êìç‰ΩúÁöÑÁ¥¢Âºï</span></span><br><span class="line"></span><br><span class="line">  recvq waitq <span class="comment">// Á≠âÂæÖÊé•Êî∂ÁöÑÂçèÁ®ãÈòüÂàó</span></span><br><span class="line"></span><br><span class="line">  sendq waitq <span class="comment">// Á≠âÂæÖÂèëÈÄÅÁöÑÂçèÁ®ãÈòüÂàó</span></span><br><span class="line"></span><br><span class="line">  lock mutex <span class="comment">// ‰∫íÊñ•ÈîÅÔºå‚Ω§‰∫é‰øùÊä§Âπ∂ÂèëÊìç‰Ωú</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>buf ÊåáÂêëÂ∫ïÂ±ÇÂæ™ÁéØÊï∞ÁªÑÔºåÂè™ÊúâÁºìÂÜ≤ÂûãÁöÑ channel ÊâçÊúâ„ÄÇ‚ΩÜÁºìÂÜ≤Âå∫ÁöÑÈÄöÈÅìÂàôÁõ¥Êé•Âú®ÂèëÈÄÅÂíåÊé•Êî∂Êìç‰Ωú‰πãÈó¥‰º†ÈÄíÊï∞ÊçÆ„ÄÇ</p>
<p> sendxÔºå recvx ÂùáÊåáÂêëÂ∫ïÂ±ÇÂæ™ÁéØÊï∞ÁªÑÔºåË°®Á§∫ÂΩìÂâçÂèØ‰ª•ÂèëÈÄÅÂíåÊé•Êî∂ÁöÑÂÖÉÁ¥†‰ΩçÁΩÆÁ¥¢ÂºïÂÄºÔºàÁõ∏ÂØπ‰∫éÂ∫ïÂ±ÇÊï∞ÁªÑÔºâ„ÄÇ</p>
<p> sendqÔºå recvq ÂàÜÂà´Ë°®Á§∫Ë¢´ÈòªÂ°ûÁöÑ goroutineÔºåËøô‰∫õ goroutine Áî±‰∫éÂ∞ùËØïËØªÂèñ channel ÊàñÂêë channel ÂèëÈÄÅÊï∞ÊçÆ‚ΩΩË¢´Èòª</p>
<p>  Â°û„ÄÇ</p>
<p>waitq ÊòØ sudog ÁöÑ‚ºÄ‰∏™ÂèåÂêëÈìæË°®Ôºå‚ΩΩ sudog ÂÆûÈôÖ‰∏äÊòØÂØπ goroutine ÁöÑ‚ºÄ‰∏™Â∞ÅË£ÖÔºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> waitq <span class="keyword">struct</span> &#123;</span><br><span class="line"></span><br><span class="line">  first *sudog</span><br><span class="line"></span><br><span class="line">  last *sudog</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>lock ‚Ω§Êù•‰øùËØÅÊØè‰∏™ËØª channel ÊàñÂÜô channel ÁöÑÊìç‰ΩúÈÉΩÊòØÂéü‚º¶ÁöÑ„ÄÇ</p>
<ul>
<li><strong>‚ΩÜÁºìÂÜ≤Âå∫ÈÄöÈÅì</strong>Ôºö dataqsiz ‰∏∫ 0ÔºåÂèëÈÄÅÂíåÊé•Êî∂Êìç‰ΩúÂøÖÈ°ªÂêåÊ≠•ÂÆåÊàê„ÄÇÂ¶ÇÊûúÂèëÈÄÅ‚ΩÖÊ≤°ÊúâÊé•Êî∂‚ΩÖÔºåÂèëÈÄÅ‚ΩÖ‰ºöÈòªÂ°ûÔºåÂèç‰πã</li>
</ul>
<p>‰∫¶ÁÑ∂„ÄÇ</p>
<ul>
<li><strong>ÊúâÁºìÂÜ≤Âå∫ÈÄöÈÅì</strong>Ôºö dataqsiz ‚º§‰∫é 0ÔºåÂèëÈÄÅ‚ΩÖÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂÜô‚ºäÁºìÂÜ≤Âå∫ÔºåÊé•Êî∂‚ΩÖÂèØ‰ª•‰ªéÁºìÂÜ≤Âå∫ËØªÂèñÊï∞ÊçÆ„ÄÇÂΩìÁºìÂÜ≤Âå∫Êª°</li>
</ul>
<p>Êó∂ÔºåÂèëÈÄÅ‚ΩÖÈòªÂ°ûÔºõÂΩìÁºìÂÜ≤Âå∫‰∏∫Á©∫Êó∂ÔºåÊé•Êî∂‚ΩÖÈòªÂ°û„ÄÇ</p>
<p>hchan ‰Ωø‚Ω§‰∫íÊñ•ÈîÅÔºà mutexÔºâÊù•‰øùÊä§ÂØπÁºìÂÜ≤Âå∫ÂíåÂçèÁ®ãÈòüÂàóÁöÑËÆøÈóÆÔºåÁ°Æ‰øùÂú®Âπ∂ÂèëÊìç‰ΩúÊó∂‰∏ç‰ºöÂá∫Áé∞Êï∞ÊçÆÁ´û‰∫â„ÄÇÈÄöËøáËøô‰∫õÂ∫ïÂ±ÇÁªìÊûÑÂíåÊú∫Âà∂Ôºå channel ÂÆûÁé∞‰∫Ü‚æºÊïà‰∏îÂÆâÂÖ®ÁöÑÂçèÁ®ãÈó¥ÈÄö‰ø°„ÄÇ</p>
<p>Âú® Golang ‰∏≠Ôºåchannel ÂèØ‰ª•ÂàÜ‰∏∫Êó†ÁºìÂÜ≤ channel ÂíåÊúâÁºìÂÜ≤ channelÔºåÂÆÉ‰ª¨ÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÈÄö‰ø°ÊñπÂºèÂíå‰ΩøÁî®Âú∫ÊôØ„ÄÇ‰ª•‰∏ãÊòØ‰∏§ËÄÖÁöÑÈÄö‰øóÁêÜËß£ÂíåÂÖ∑‰ΩìÂå∫Âà´Ôºö</p>
<h2 id="ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤"><a href="#ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤" class="headerlink" title="ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤"></a>ÈÄö‰øóÁêÜËß£Êó†ÁºìÂÜ≤ÂíåÊúâÁºìÂÜ≤</h2><p><strong>Êó†ÁºìÂÜ≤ channelÔºàÂêåÊ≠• channelÔºâ</strong></p>
<ul>
<li>Êó†ÁºìÂÜ≤ channel Â∞±ÂÉè‰∏§‰∏™‰∫∫Áõ¥Êé•ËøõË°åÈù¢ÂØπÈù¢ÁöÑ‰∫§ÊµÅ„ÄÇ</li>
<li>ÂèëÈÄÅÊñπÂíåÊé•Êî∂ÊñπÂøÖÈ°ªÂêåÊó∂ÂáÜÂ§áÂ•ΩÔºåÊâçËÉΩËøõË°åÊï∞ÊçÆ‰º†ÈÄí„ÄÇ</li>
<li>Â¶ÇÊûúÂèëÈÄÅÊñπÂÖàÂà∞ÔºåÂÆÉ‰ºö‰∏ÄÁõ¥Á≠âÂæÖÊé•Êî∂ÊñπÂà∞Êù•ÔºõÂ¶ÇÊûúÊé•Êî∂ÊñπÂÖàÂà∞ÔºåÂÆÉ‰ºö‰∏ÄÁõ¥Á≠âÂæÖÂèëÈÄÅÊñπÂèëÈÄÅÊï∞ÊçÆ„ÄÇ</li>
<li>Êó†ÁºìÂÜ≤ channel ÁöÑÂèëÈÄÅÂíåÊé•Êî∂Êìç‰ΩúÊòØÂêåÊ≠•ÁöÑÔºå‰ºöÈòªÂ°ûÁõ¥Âà∞ÂèåÊñπÈÉΩÂáÜÂ§áÂ•Ω„ÄÇ</li>
</ul>
<p><strong>ÊúâÁºìÂÜ≤ channelÔºàÂºÇÊ≠• channelÔºâ</strong></p>
<ul>
<li>ÊúâÁºìÂÜ≤ channel Â∞±ÂÉè‰∏Ä‰∏™Âø´ÈÄíÊüúÔºåÂèëÈÄÅÊñπÂèØ‰ª•ÂÖàÊää‰∏úË•øÊîæÂú®Âø´ÈÄíÊüúÈáåÔºåÊé•Êî∂ÊñπÂèØ‰ª•Âú®ÊúâÁ©∫ÁöÑÊó∂ÂÄôÊù•Âèñ„ÄÇ</li>
<li>ÂèëÈÄÅÊñπÂú®ÁºìÂÜ≤Âå∫ÊúâÁ©∫‰ΩçÊó∂ÂèØ‰ª•Áõ¥Êé•ÊääÊï∞ÊçÆÊîæËøõÂéªÔºå‰∏çÈúÄË¶ÅÁ≠âÂæÖÊé•Êî∂Êñπ„ÄÇ</li>
<li>Êé•Êî∂ÊñπÂú®ÁºìÂÜ≤Âå∫ÊúâÊï∞ÊçÆÊó∂ÂèØ‰ª•Áõ¥Êé•ÂèñÂá∫Êù•Ôºå‰∏çÈúÄË¶ÅÁ≠âÂæÖÂèëÈÄÅÊñπ„ÄÇ</li>
<li>ÊúâÁºìÂÜ≤ channel ÁöÑÂèëÈÄÅÂíåÊé•Êî∂Êìç‰ΩúÂú®ÁºìÂÜ≤Âå∫ÊúâÁ©∫Èó¥ÊàñÊï∞ÊçÆÊó∂ÂèØ‰ª•ÂºÇÊ≠•ËøõË°åÔºåÂè™ÊúâÂú®ÁºìÂÜ≤Âå∫Êª°ÊàñÁ©∫Êó∂Êâç‰ºöÈòªÂ°û„ÄÇ</li>
</ul>
<p>‰ΩøÁî®Âú∫ÊôØ</p>
<p><strong>Êó†ÁºìÂÜ≤ channel</strong></p>
<ul>
<li>ÂΩìÈúÄË¶Å‰∏•Ê†ºÂêåÊ≠•‰∏§‰∏™ goroutine ÁöÑÊâßË°åÈ°∫Â∫èÊó∂„ÄÇ</li>
<li>ÂΩìÈúÄË¶ÅÁ°Æ‰øùÂèëÈÄÅÊñπÂíåÊé•Êî∂ÊñπÂêåÊó∂ÂèÇ‰∏éÈÄö‰ø°Êó∂„ÄÇ</li>
</ul>
<p><strong>ÊúâÁºìÂÜ≤ channel</strong></p>
<ul>
<li>ÂΩìÈúÄË¶ÅËß£ËÄ¶ÂèëÈÄÅÂíåÊé•Êî∂Êìç‰ΩúÊó∂„ÄÇ</li>
<li>ÂΩìÈúÄË¶ÅÊöÇÂ≠òÊï∞ÊçÆÔºåÈÅøÂÖçÂèëÈÄÅÊñπÊàñÊé•Êî∂ÊñπÈòªÂ°ûÊó∂„ÄÇ</li>
</ul>
<h1 id="SelectÁöÑÁî®Ê≥ï"><a href="#SelectÁöÑÁî®Ê≥ï" class="headerlink" title="SelectÁöÑÁî®Ê≥ï"></a>SelectÁöÑÁî®Ê≥ï</h1><p>Select Áî®Êù•Â§ÑÁêÜ‰∏Ä‰∏™ Goroutine Á≠âÂæÖÂ§ö‰∏™ Channel ÁöÑÊÉÖÂÜµ„ÄÇÁ±ª‰ºº‰∫é Switch ËØ≠Âè•ÔºåSelect ÁöÑÊØè‰∏™ case ÈÉΩÊòØ‰∏Ä‰∏™ÈÄö‰ø°Êìç‰ΩúÔºàÂèëÈÄÅÊàñÊé•Êî∂ÔºâÔºåÂΩìÊúâ case Êª°Ë∂≥Êù°‰ª∂ÁöÑÊó∂ÂÄôÔºåÂàôÊâßË°åÂØπÂ∫î case ÂùóÁöÑ‰ª£Á†Å„ÄÇ</p>
<p>ÂΩìÊ≤°Êúâ case Êª°Ë∂≥ÁöÑÊó∂ÂÄôÔºåSelect ÈÄªËæëÂùó‰πü‰ºöÈòªÂ°ûÁ®ãÂ∫èÔºåÂΩìÊúâÂ§ö‰∏™ case Êª°Ë∂≥ÁöÑÊó∂ÂÄôÔºåSelect ‰ºöÂÖ¨Âπ≥ÈÄâÊã©‰∏Ä‰∏™Êª°Ë∂≥Êù°‰ª∂ÁöÑ case ËØ≠Âè•ÂùóÊâßË°åÔºàGO1.8 ‰πãÂêé‰ºöÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™Ôºâ„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçÈòªÂ°ûÔºåÂèØ‰ª•‰ΩøÁî® default „ÄÇ</p>
<p>Âú® Golang Âπ∂ÂèëÁºñÁ®ã‰∏≠Ôºå<code>select</code> ËØ≠Âè•Áî®‰∫éÂ§ÑÁêÜÂ§ö‰∏™ channel ÁöÑÈÄö‰ø°„ÄÇÂÆÉÂÖÅËÆ∏Á®ãÂ∫èÂêåÊó∂ÁõëÂê¨Â§ö‰∏™ channel ‰∏äÁöÑÈÄö‰ø°Êìç‰ΩúÔºåÂπ∂Ê†πÊçÆÂì™‰∏™Êìç‰ΩúÊúÄÂÖàÂÆåÊàêÊù•ÊâßË°åÁõ∏Â∫îÁöÑ‰ª£Á†ÅÂùó„ÄÇ<code>select</code> ËØ≠Âè•Âú®Â§ÑÁêÜÂ§ö‰∏™Âπ∂ÂèëÈÄö‰ø°Êó∂ÈùûÂ∏∏ÊúâÁî®ÔºåÂèØ‰ª•ÂÆûÁé∞Â§öË∑ØÂ§çÁî®„ÄÇ</p>
<h2 id="ÂÖ≥ÈîÆÁÇπ"><a href="#ÂÖ≥ÈîÆÁÇπ" class="headerlink" title="ÂÖ≥ÈîÆÁÇπ"></a>ÂÖ≥ÈîÆÁÇπ</h2><ol>
<li><strong>Â§öË∑ØÂ§çÁî®</strong>Ôºö<code>select</code> ‰ºöÂêåÊó∂ÁõëÂê¨Â§ö‰∏™ channel ‰∏äÁöÑÈÄö‰ø°Êìç‰Ωú„ÄÇ</li>
<li><strong>ÈöèÊú∫ÈÄâÊã©</strong>ÔºöÂ¶ÇÊûúÊúâÂ§ö‰∏™ÈÄö‰ø°Êìç‰ΩúÂêåÊó∂ÂèØ‰ª•ÊâßË°åÔºå<code>select</code> ‰ºöÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÊâßË°å„ÄÇ</li>
<li><strong>ÈòªÂ°û</strong>ÔºöÂ¶ÇÊûúÊ≤°ÊúâÈÄö‰ø°Êìç‰ΩúÂèØ‰ª•Á´ãÂç≥ÊâßË°å‰∏îÊ≤°ÊúâÈªòËÆ§ÂàÜÊîØÔºå<code>select</code> ‰ºöÈòªÂ°ûÔºåÁõ¥Âà∞Ëá≥Â∞ëÊúâ‰∏Ä‰∏™ÈÄö‰ø°Êìç‰ΩúÂèØ‰ª•ÊâßË°å„ÄÇ</li>
<li><strong>ÈªòËÆ§ÂàÜÊîØ</strong>ÔºöÂ¶ÇÊûúÊúâÈªòËÆ§ÂàÜÊîØÔºåÂΩìÊ≤°ÊúâÈÄö‰ø°Êìç‰ΩúÂèØ‰ª•Á´ãÂç≥ÊâßË°åÊó∂Ôºå‰ºöÊâßË°åÈªòËÆ§ÂàÜÊîØÁöÑ‰ª£Á†Å„ÄÇ</li>
</ol>
<h2 id="Ê≥®ÊÑè‰∫ãÈ°π"><a href="#Ê≥®ÊÑè‰∫ãÈ°π" class="headerlink" title="Ê≥®ÊÑè‰∫ãÈ°π"></a>Ê≥®ÊÑè‰∫ãÈ°π</h2><ol>
<li><strong>ÈöèÊú∫ÈÄâÊã©</strong>ÔºöÂΩìÂ§ö‰∏™ <code>case</code> ÂêåÊó∂Êª°Ë∂≥Êó∂Ôºå<code>select</code> ‰ºöÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÊâßË°åÔºåÊó†Ê≥ïÈ¢ÑÊµãÂÖ∑‰ΩìÊòØÂì™‰∏Ä‰∏™„ÄÇ</li>
<li><strong>ÈòªÂ°û</strong>ÔºöÂ¶ÇÊûúÊ≤°Êúâ <code>default</code> ÂàÜÊîØ‰∏îÊ≤°ÊúâÈÄö‰ø°Êìç‰ΩúÂèØ‰ª•Á´ãÂç≥ÊâßË°åÔºå<code>select</code> ‰ºöÈòªÂ°û„ÄÇ</li>
<li><strong>Ê≠ªÈîÅÈ£éÈô©</strong>ÔºöÂ¶ÇÊûúÊâÄÊúâ <code>case</code> ÈÉΩÊó†Ê≥ïÊâßË°å‰∏îÊ≤°Êúâ <code>default</code> ÂàÜÊîØÔºåÁ®ãÂ∫èÂèØËÉΩ‰ºöÈô∑ÂÖ•Ê≠ªÈîÅ„ÄÇ</li>
<li><strong>ÊïàÁéá</strong>Ôºö<code>select</code> ÁöÑÊïàÁéáËæÉÈ´òÔºåÈÄÇÂêàÂ§ÑÁêÜÂ§ö‰∏™Âπ∂ÂèëÈÄö‰ø°„ÄÇ</li>
</ol>
<h1 id="‰ΩøÁî®syncÂåÖ"><a href="#‰ΩøÁî®syncÂåÖ" class="headerlink" title="‰ΩøÁî®syncÂåÖ"></a>‰ΩøÁî®syncÂåÖ</h1><p>Golang Âπ∂ÂèëÁºñÁ®ãÁ¶ª‰∏çÂºÄ sync ÂåÖÔºåÈáåÈù¢Êèê‰æõ‰∫ÜÂæàÂ§öÊúâÁî®ÁöÑÁ±ªÂûãÂíåÊñπÊ≥ï„ÄÇÂ∏∏Áî®Áü•ËØÜÁÇπÂ¶Ç‰∏ãÔºö</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>ÊôÆÈÄöÁöÑ map ‰∏çÊòØÂπ∂ÂèëÂÆâÂÖ®ÁöÑÔºåÂÆπÊòìÂá∫Áé∞Á´û‰∫âÈóÆÈ¢ò„ÄÇsync.Map ÊòØÂÆòÊñπÊèê‰æõÁöÑ‰∏Ä‰∏™Âπ∂ÂèëÂÆâÂÖ®ÁöÑ MapÔºå‰∏çÈúÄË¶ÅËá™Â∑±È¢ùÂ§ñÂ§ÑÁêÜÈîÅ„ÄÅÂçèË∞ÉÁ≠âÊìç‰Ωú„ÄÇËØ•Á±ªÂûãÊèê‰æõ‰∫Ü‰ª•‰∏ãÊñπÊ≥ïÔºö</p>
<ul>
<li>Loads(): Ë£ÖËΩΩÈîÆÂÄºÔºàËé∑ÂèñÈîÆÂÄºÔºâ</li>
<li>Store(): ÂÇ®Â≠òÈîÆÂÄº</li>
<li>Delete(): Âà†Èô§ÈîÆÂÄº</li>
<li>LoadOrStore(): Â¶ÇÊûúÂ≠òÂú®ÂàôËé∑ÂèñÈîÆÂÄºÔºå‰∏çÂ≠òÂú®ÂàôÂ≠òÂÇ®</li>
<li>Range(): ÈÅçÂéÜ Map</li>
</ul>
<h2 id="Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã"><a href="#Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã" class="headerlink" title="Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã"></a>Áõ∏ÂèçÔºåÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊï∞ÊçÆÊúâÂ¶Ç‰∏ã</h2><ul>
<li><p>sync.MapÔºöÈÄöËøáËØªÂÜô mapÊù•ÂÆûÁé∞ÔºåËØªËØ∑Ê±ÇÈªòËÆ§‚æõËØª mapÔºåÂ¶ÇÊûúËØª‰∏çÂà∞ÂÜçËØ∑Ê±ÇÂÜô mapÔºàÂä†ÈîÅ‰øùËØÅÔºâÔºåÂêåÊó∂Âú®ÁâπÂÆöÊù°‰ª∂Êª°‚æúÁöÑÊÉÖÂÜµ‰∏ãÂêåÊ≠•ÁºìÂ≠òÂíå DB ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇmisses Â≠óÊÆµÂàô‚Ω§‰∫éËÆ°Êï∞ÔºåËÆ∞ÂΩïÁºìÂ≠òÊú™ÂëΩ‰∏≠ÁöÑÊ¨°Êï∞ÔºåÂΩìÊàë‰ª¨Ë¶ÅËØªÂèñmap ‰∏≠Êüê‰∏™ key ÂØπÂ∫îÁöÑÂÄºÊó∂Ôºå‰ºòÂÖà‰ªé read ËØªÂèñÔºåÂ¶ÇÊûú read ‰∏≠‰∏çÂ≠òÂú®ÔºåÂàô misses ÂÄºÂä† 1ÔºåÁÑ∂ÂêéÁªßÁª≠‰ªé dirty ‰∏≠ËØªÂèñÔºåÂΩì misses ÂÄºËææÂà∞Êüê‰∏™ÈòàÂÄºÊó∂Ôºåsync.Map Â∞±‰ºöÂ∞Ü dirty ÊèêÂçá‰∏∫ read„ÄÇ</p>
</li>
<li><p>sync.PoolÊòØ‚ºÄ‰∏™Âπ∂ÂèëÂÆâÂÖ®ÁöÑ‰∏¥Êó∂ÂØπË±°Ê±†„ÄÇÂÆÉÂèØ‰ª•ÂÆâÂÖ®Âú∞Ë¢´Â§ö‰∏™ goroutine ÂêåÊó∂‰Ωø‚Ω§Ôºå‚Ω§‰∫éÁºìÂ≠òÂíåÂ§ç‚Ω§‰∏¥Êó∂ÂØπË±°ÔºåÂáèÂ∞ëÈ¢ëÁπÅÂàõÂª∫ÂíåÈîÄÊØÅÂØπË±°Â∏¶Êù•ÁöÑÂÜÖÂ≠òÂàÜÈÖçÂíåÂûÉÂúæÂõûÊî∂Âéã‚ºíÔºåÊèê‚æºÊÄßËÉΩ„ÄÇ</p>
</li>
<li><p>Âéü‚º¶Á±ªÂûãÂåÖ sync&#x2F;atomic ÂåÖ;Ëøõ‚æèÂπ∂ÂèëÂÆâÂÖ®ÁöÑÊìç‰Ωú„ÄÇ</p>
</li>
<li><p>ËØªÂÜôÈîÅÔºà sync.RWMutexÔºâÂåÖË£ÖÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
</li>
<li><p>MutexÔºö‰∫íÊñ•ÈîÅ„ÄÇÂØπ‰∫éÂä†‰∫ÜÈîÅÁöÑÊìç‰ΩúÔºåÂÖ∂‰ªñÁöÑ Goroutine Âú®ËØªÂèñÁõ∏Â∫îÂØπË±°Êó∂‰ºöÈòªÂ°ûÔºåÁü•ÈÅì‰∫íÊñ•ÂØπË±°ÈáäÊîæ„ÄÇÈ¢ëÁπÅ„ÄÅÂ§ßÈáèÁöÑ‰ΩøÁî®‰∫íÊñ•ÈîÅ‰ºöÂØºËá¥ÊÄßËÉΩÁöÑÈôç‰ΩéÔºåÂ∫îËØ•Âè™Âú®ÂøÖÈ°ªÁî®ÁöÑÂú∞ÊñπÁî®„ÄÇ‰∫íÊñ•ÈîÅ‰ΩøÁî®‰∏çÂΩìËøòÊúâÂèØËÉΩÈÄ†ÊàêÊ≠ªÈîÅ„ÄÅÊ¥ªÈîÅ„ÄÅÈ•øÊ≠ªÁ≠âÊÉÖÂÜµÔºåÂ∞±ÊØîËæÉÂ§çÊùÇ‰∫Ü„ÄÇ</p>
</li>
</ul>
<h2 id="sync-Once"><a href="#sync-Once" class="headerlink" title="sync.Once"></a><code>sync.Once</code></h2><p>Âú® Golang ‰∏≠Ôºå<code>sync.Once</code> ÊòØ‰∏Ä‰∏™Áî®‰∫éÁ°Æ‰øùÊüê‰∏™ÂáΩÊï∞ÊàñÊñπÊ≥ïÂè™Ë¢´Ë∞ÉÁî®‰∏ÄÊ¨°ÁöÑÂ∑•ÂÖ∑„ÄÇÂÆÉÂú®Âπ∂ÂèëÁºñÁ®ã‰∏≠ÈùûÂ∏∏ÊúâÁî®ÔºåÂèØ‰ª•Áî®Êù•ÂÆûÁé∞Âçï‰æãÊ®°Âºè„ÄÅËµÑÊ∫êÂàùÂßãÂåñÁ≠âÂú∫ÊôØÔºåÁ°Æ‰øùÊüê‰∫õÊìç‰ΩúÂè™ÊâßË°å‰∏ÄÊ¨°ÔºåÂç≥‰ΩøÊúâÂ§ö‰∏™ goroutine ÂêåÊó∂Â∞ùËØïÊâßË°åËøô‰∫õÊìç‰Ωú„ÄÇ</p>
<h3 id="Âü∫Êú¨Áî®Ê≥ï"><a href="#Âü∫Êú¨Áî®Ê≥ï" class="headerlink" title="Âü∫Êú¨Áî®Ê≥ï"></a>Âü∫Êú¨Áî®Ê≥ï</h3><p><code>sync.Once</code> Êèê‰æõ‰∫Ü‰∏§‰∏™‰∏ªË¶ÅÊñπÊ≥ïÔºö</p>
<ol>
<li>**<code>Do(f func())</code>**ÔºöÊâßË°åÁªôÂÆöÁöÑÂáΩÊï∞ <code>f</code>ÔºåÂπ∂‰∏î‰øùËØÅ <code>f</code> Âè™‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°ÔºåÂç≥‰ΩøÊúâÂ§ö‰∏™ goroutine Ë∞ÉÁî® <code>Do</code> ÊñπÊ≥ï„ÄÇ</li>
<li>**<code>Done() chan struct&#123;&#125;</code>**ÔºöËøîÂõû‰∏Ä‰∏™ÈÄöÈÅìÔºåÂΩì <code>Do</code> ÊñπÊ≥ïÂÆåÊàêÊó∂ÔºåËØ•ÈÄöÈÅì‰ºöÂÖ≥Èó≠„ÄÇÂèØ‰ª•Áî®‰∫éÁ≠âÂæÖ <code>Do</code> ÊñπÊ≥ïÁöÑÂÆåÊàê„ÄÇ</li>
</ol>
<p>Á§∫‰æã‰ª£Á†Å</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> once sync.Once</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ÂÆö‰πâ‰∏Ä‰∏™ÈúÄË¶ÅÂè™ÊâßË°å‰∏ÄÊ¨°ÁöÑÂáΩÊï∞</span></span><br><span class="line">    initFunc := <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Initializing...&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Â§ö‰∏™ goroutine ÂêåÊó∂Ë∞ÉÁî® once.Do</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            once.Do(initFunc)</span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Á≠âÂæÖÊâÄÊúâ goroutine ÂÆåÊàê</span></span><br><span class="line">    time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Âçï‰æãÊ®°Âºè</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    instance *MySingleton</span><br><span class="line">    once     sync.Once</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MySingleton <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewMySingleton</span><span class="params">()</span></span> *MySingleton &#123;</span><br><span class="line">    once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        instance = &amp;MySingleton&#123;&#125;</span><br><span class="line">        fmt.Println(<span class="string">&quot;Singleton instance created&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// Â§ö‰∏™ goroutine ÂêåÊó∂Ëé∑ÂèñÂçï‰æãÂÆû‰æã</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">            singleton := NewMySingleton()</span><br><span class="line">            fmt.Println(<span class="string">&quot;Got singleton instance:&quot;</span>, singleton)</span><br><span class="line">        &#125;()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Á≠âÂæÖÊâÄÊúâ goroutine ÂÆåÊàê</span></span><br><span class="line">    time.Sleep(<span class="number">100</span> * time.Millisecond)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ËæìÂá∫Ôºö</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Singleton instance created</span><br><span class="line">Got singleton instance: &amp;&#123;&#123;&#125;&#125;</span><br><span class="line">Got singleton instance: &amp;&#123;&#123;&#125;&#125;</span><br><span class="line">Got singleton instance: &amp;&#123;&#123;&#125;&#125;</span><br><span class="line">Got singleton instance: &amp;&#123;&#123;&#125;&#125;</span><br><span class="line">Got singleton instance: &amp;&#123;&#123;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Ê≥®ÊÑè‰∫ãÈ°π-1"><a href="#Ê≥®ÊÑè‰∫ãÈ°π-1" class="headerlink" title="Ê≥®ÊÑè‰∫ãÈ°π"></a>Ê≥®ÊÑè‰∫ãÈ°π</h3><ol>
<li><strong>Á∫øÁ®ãÂÆâÂÖ®ÊÄß</strong>Ôºö<code>sync.Once</code> ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂèØ‰ª•ÂÆâÂÖ®Âú∞Âú®Â§ö‰∏™ goroutine ‰∏≠‰ΩøÁî®„ÄÇ</li>
<li><strong>ÂáΩÊï∞ÊâßË°å</strong>Ôºö<code>Do</code> ÊñπÊ≥ï‰∏≠ÁöÑÂáΩÊï∞Âè™‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°ÔºåÂç≥‰ΩøÊúâÂ§ö‰∏™ goroutine ÂêåÊó∂Ë∞ÉÁî® <code>Do</code> ÊñπÊ≥ï„ÄÇ</li>
<li><strong>‰∏çÂèØÈáçÁΩÆ</strong>Ôºö<code>sync.Once</code> ‰∏çËÉΩË¢´ÈáçÁΩÆÔºå‰∏ÄÊó¶ÊâßË°åÂÆåÊàêÔºåÊó†Ê≥ïÂÜçÊ¨°ÊâßË°å„ÄÇ</li>
</ol>
<p><code>sync.Once</code> ÊòØ Golang Âπ∂ÂèëÁºñÁ®ã‰∏≠‰∏Ä‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂ∑•ÂÖ∑ÔºåÁî®‰∫éÁ°Æ‰øùÊüê‰∏™ÂáΩÊï∞ÊàñÊñπÊ≥ïÂè™Ë¢´Ë∞ÉÁî®‰∏ÄÊ¨°„ÄÇÂÆÉÂú®ÂÆûÁé∞Âçï‰æãÊ®°Âºè„ÄÅËµÑÊ∫êÂàùÂßãÂåñÁ≠âÂú∫ÊôØ‰∏≠ÈùûÂ∏∏ÊúâÁî®ÔºåÂèØ‰ª•ÁÆÄÂåñ‰ª£Á†ÅÂπ∂ÊèêÈ´òÁ®ãÂ∫èÁöÑÂèØÈù†ÊÄß„ÄÇ</p>
<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>ÊúÄËøëÁöÑÈ°πÁõÆÈÉΩ‰ΩøÁî® Golang ËøõË°åÂºÄÂèëÔºåÂõ†‰∏∫Ëá™Â∑±ÊòØ‰ªéÂ§¥Ëá™Â≠¶ÔºåÈöæÂÖçË∏©‰∫ÜÂæàÂ§öÂùë„ÄÇÁõÆÂâçÈ°πÁõÆÊé•ËøëÂ∞æÂ£∞ÔºåÊäΩÁ©∫ÂØπ‰∏Ä‰∫õÈáçË¶ÅÁöÑÁü•ËØÜÁÇπÂÅö‰∏Ä‰∫õÊÄªÁªì„ÄÇ</p>
<h2 id="Goroutine-‰∏é-Channel"><a href="#Goroutine-‰∏é-Channel" class="headerlink" title="Goroutine ‰∏é Channel"></a>Goroutine ‰∏é Channel</h2><p>‰ªÄ‰πàÊòØ Goroutine Âë¢ÔºüÊúâ‰∫∫ËØ¥ÂÆÉÊòØËΩªÈáèÁ∫ßÁöÑËøõÁ®ãÔºåÊàñËÄÖÂπ≤ËÑÜËØ¥ÊòØÂçèÁ®ã„ÄÇÂÖ∂ÂÆûÈÉΩ‰∏çÂ§™ÂáÜÁ°ÆÔºåÂçèÁ®ã‰ªÖ‰ªÖÊòØÂú®‰∏Ä‰∏™ËøõÁ®ã‰∏≠ËøõË°åÂ≠êÁ®ãÂ∫èÁöÑÂàáÊç¢ÔºåËÄå Goroutine ÊòØÂèØ‰ª•Â§öÁ∫øÁ®ãÂ§öË∑ØÂ§çÁî®ÁöÑ„ÄÇÁÆÄËÄåË®Ä‰πãÔºåGoroutine ÊòØ‰∏Ä‰∏™ËΩªÈáèÁ∫ßÁöÑ„ÄÅ‰∏éÂÖ∂‰ªñ Goroutine ËøêË°åÂú®Âêå‰∏ÄÂùóÂÜÖÂ≠òÂú∞ÂùÄ‰∏≠ÁöÑÂπ∂ÂèëÊâßË°åÁöÑÂáΩÊï∞Ê®°Âûã„ÄÇÂÆÉÁöÑÊàêÊú¨‰ªÖ‰ªÖÊØîÂ†ÜÊ†àÁöÑÂàÜÈÖçÈ´ò‰∏ÄÁÇπÁÇπÔºåÊâÄ‰ª•ÂæàÂªâ‰ª∑„ÄÇGoroutine ÂèØ‰ª•Âú®Â§ö‰∏™Á∫øÁ®ã‰∏äÈÄöËøá Goroutine Ëá™Â∑±ÁöÑË∞ÉÂ∫¶Âô®ÂÆûÁé∞Â§öË∑ØÂ§çÁî®„ÄÇ</p>
<p>ÈÇ£‰ªÄ‰πàÊòØ Channel Âë¢ÔºüÂÆÉÊòØÁ®ãÂ∫è‰∏≠‰∏ÄÁßçÁ±ªÂûãÂåñÁöÑÈÄöÈÅìÔºåÂç≥Âú®Ëøô‰∏™ËôöÊãüÈÄöÈÅì‰∏≠‰º†ËæìÁöÑÊòØÊüêÁßçÈ¢ÑÂÆö‰πâÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇÈÄöËøáÁõ∏Â∫îÁöÑÊìç‰ΩúÁ¨¶Â¶Ç <code>&lt;-</code> ÂèØ‰ª•Âú® Goroutine ‰πãÈó¥ÂèëÈÄÅÂíåÊé•Êî∂Êï∞ÊçÆ„ÄÇ Channel Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊé•Êî∂ÊàñËÄÖÂèëÈÄÅÁöÑÊüêÁ´ØÊ≤°ÊúâÊâßË°åÁöÑÊó∂ÂÄô‰ºöÈòªÂ°ûÁ®ãÂ∫è„ÄÇChannel ÂèØ‰ª•Âú®ÂàõÂª∫Êó∂ÂÆö‰πâÁºìÂÜ≤Â§ßÂ∞èÔºåÂç≥ÁºìÂÜ≤Âå∫Â∑≤Êª°Êó∂Êâç‰ºöÂèëÈÄÅÁºìÂ≠òÂå∫ÁöÑÊâÄÊúâÊï∞ÊçÆ„ÄÇ</p>
<p>Channel ÊúÄÁÆÄÂçïÁöÑÁî®Ê≥ïÂ∞±ÊòØÂà©Áî®ÂÖ∂ÈòªÂ°ûÁ®ãÂ∫èÁöÑÁâπÊÄßÊù•ÂÅö Goroutine ÁªìÊùüÁöÑÊ†áÂøó„ÄÇ‰æãÂ¶ÇÂú® Goroutine ‰ª£Á†ÅÂùóÂ§ñÂÆö‰πâ‰∏Ä‰∏™ Channel Êé•Êî∂ÂÖ∂‰∏≠ÁöÑÊï∞ÊçÆÔºåÂΩì Goroutine ‰ª£Á†ÅÂùóÂÜÖÈÉ®ÊâßË°åÂÆåÊØïÊó∂Âêë Channel ÂèëÈÄÅÂÆåÊàê‰ø°Âè∑ËøõËÄåÊâßË°åÂêéÁª≠ÁöÑ‰ª£Á†Å„ÄÇ</p>
<p>ÂΩìÁ®ãÂ∫èÊúâÂ§ö‰∏™ Goroutine ÊàñËÄÖÂ§ö‰∏™ Channel Ôºå‰ªñ‰ª¨ÁÆ°ÁêÜËµ∑Êù•Â∞±ÂÆπÊòìÂèòÂæóÊ∑∑‰π±„ÄÇËøôÊó∂Â∞±ÂèØ‰ª•ËÄÉËôë‰ΩøÁî®‰∏ãÊñáËÆ≤Âà∞ÁöÑÁü•ËØÜ„ÄÇ</p>
<h2 id="Select-ÁöÑÁî®Ê≥ï"><a href="#Select-ÁöÑÁî®Ê≥ï" class="headerlink" title="Select ÁöÑÁî®Ê≥ï"></a>Select ÁöÑÁî®Ê≥ï</h2><p>Select Áî®Êù•Â§ÑÁêÜ‰∏Ä‰∏™ Goroutine Á≠âÂæÖÂ§ö‰∏™ Channel ÁöÑÊÉÖÂÜµ„ÄÇÁ±ª‰ºº‰∫é Switch ËØ≠Âè•ÔºåSelect ÁöÑÊØè‰∏™ case ÈÉΩÊòØ‰∏Ä‰∏™ÈÄö‰ø°Êìç‰ΩúÔºàÂèëÈÄÅÊàñÊé•Êî∂ÔºâÔºåÂΩìÊúâ case Êª°Ë∂≥Êù°‰ª∂ÁöÑÊó∂ÂÄôÔºåÂàôÊâßË°åÂØπÂ∫î case ÂùóÁöÑ‰ª£Á†Å„ÄÇÂΩìÊ≤°Êúâ case Êª°Ë∂≥ÁöÑÊó∂ÂÄôÔºåSelect ÈÄªËæëÂùó‰πü‰ºöÈòªÂ°ûÁ®ãÂ∫èÔºåÂΩìÊúâÂ§ö‰∏™ case Êª°Ë∂≥ÁöÑÊó∂ÂÄôÔºåSelect ‰ºöÂÖ¨Âπ≥ÈÄâÊã©‰∏Ä‰∏™Êª°Ë∂≥Êù°‰ª∂ÁöÑ case ËØ≠Âè•ÂùóÊâßË°å„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçÈòªÂ°ûÔºåÂèØ‰ª•‰ΩøÁî® default „ÄÇ</p>
<h2 id="‰ΩøÁî®-sync-ÂåÖ"><a href="#‰ΩøÁî®-sync-ÂåÖ" class="headerlink" title="‰ΩøÁî® sync ÂåÖ"></a>‰ΩøÁî® sync ÂåÖ</h2><p>Golang Âπ∂ÂèëÁºñÁ®ãÁ¶ª‰∏çÂºÄ sync ÂåÖÔºåÈáåÈù¢Êèê‰æõ‰∫ÜÂæàÂ§öÊúâÁî®ÁöÑÁ±ªÂûãÂíåÊñπÊ≥ï„ÄÇÂ∏∏Áî®Áü•ËØÜÁÇπÂ¶Ç‰∏ãÔºö</p>
<h3 id="Map-1"><a href="#Map-1" class="headerlink" title="Map"></a>Map</h3><p>ÊôÆÈÄöÁöÑ map ‰∏çÊòØÂπ∂ÂèëÂÆâÂÖ®ÁöÑÔºåÂÆπÊòìÂá∫Áé∞Á´û‰∫âÈóÆÈ¢ò„ÄÇsync.Map ÊòØÂÆòÊñπÊèê‰æõÁöÑ‰∏Ä‰∏™Âπ∂ÂèëÂÆâÂÖ®ÁöÑ MapÔºå‰∏çÈúÄË¶ÅËá™Â∑±È¢ùÂ§ñÂ§ÑÁêÜÈîÅ„ÄÅÂçèË∞ÉÁ≠âÊìç‰Ωú„ÄÇËØ•Á±ªÂûãÊèê‰æõ‰∫Ü‰ª•‰∏ãÊñπÊ≥ïÔºö</p>
<ul>
<li>Loads(): Ë£ÖËΩΩÈîÆÂÄºÔºàËé∑ÂèñÈîÆÂÄºÔºâ</li>
<li>Store(): ÂÇ®Â≠òÈîÆÂÄº</li>
<li>Delete(): Âà†Èô§ÈîÆÂÄº</li>
<li>LoadOrStore(): Â¶ÇÊûúÂ≠òÂú®ÂàôËé∑ÂèñÈîÆÂÄºÔºå‰∏çÂ≠òÂú®ÂàôÂ≠òÂÇ®</li>
<li>Range(): ÈÅçÂéÜ Map</li>
</ul>
<p>ÊàëÂú®È°πÁõÆ‰∏≠‰ΩøÁî®ËØ•Á±ªÂûãÊõø‰ª£‰∫ÜËá™Â∑±ÂéüÊú¨ÂÆö‰πâÁöÑ‰∏Ä‰∏™ÂÖ®Â±Ä Map Á±ªÂûãÔºåÁõ∏ÊØîËá™Â∑±Áª¥Êä§‰∫íÊñ•ÈîÅÊàñËÄÖËØªÂÜôÈîÅÁ≠âÊìç‰ΩúÊñπ‰æø‰∫Ü‰∏çÂ∞ëÔºåËÄå‰∏îÊÄßËÉΩÊúâ‰ºòÂäøÔºàÂÖ∑‰ΩìÊ≤°ÊúâÊµãËØïÔºâÔºåÊçÆÂÆòÊñπËØ¥ÊòéËØ• Map Á±ªÂûãÊòæËëóÂáèÂ∞ë‰∫ÜÈîÅÁöÑ‰∫âÁî®„ÄÇ</p>
<h3 id="Mutex"><a href="#Mutex" class="headerlink" title="Mutex"></a>Mutex</h3><p>‰∫íÊñ•ÈîÅ„ÄÇÂØπ‰∫éÂä†‰∫ÜÈîÅÁöÑÊìç‰ΩúÔºåÂÖ∂‰ªñÁöÑ Goroutine Âú®ËØªÂèñÁõ∏Â∫îÂØπË±°Êó∂‰ºöÈòªÂ°ûÔºåÁü•ÈÅì‰∫íÊñ•ÂØπË±°ÈáäÊîæ„ÄÇÈ¢ëÁπÅ„ÄÅÂ§ßÈáèÁöÑ‰ΩøÁî®‰∫íÊñ•ÈîÅ‰ºöÂØºËá¥ÊÄßËÉΩÁöÑÈôç‰ΩéÔºåÂ∫îËØ•Âè™Âú®ÂøÖÈ°ªÁî®ÁöÑÂú∞ÊñπÁî®„ÄÇ‰∫íÊñ•ÈîÅ‰ΩøÁî®‰∏çÂΩìËøòÊúâÂèØËÉΩÈÄ†ÊàêÊ≠ªÈîÅ„ÄÅÊ¥ªÈîÅ„ÄÅÈ•øÊ≠ªÁ≠âÊÉÖÂÜµÔºåÂ∞±ÊØîËæÉÂ§çÊùÇ‰∫Ü„ÄÇ</p>
<h3 id="RWMutex"><a href="#RWMutex" class="headerlink" title="RWMutex"></a>RWMutex</h3><p>ËØªÂÜôÈîÅ„ÄÇÁõ∏ËæÉ‰∫íÊñ•ÈîÅÔºåËØªÂÜôÈîÅÁõ∏ËæÉ‰∫íÊñ•ÈîÅÊÄßËÉΩÊçüËÄó‰Ωé‰∫õÔºåÂõ†‰∏∫ÂØπ‰∫éÂè™ËØªÊìç‰ΩúÂè™Âä†ÂÖ±‰∫´ÈîÅÔºåÊòØÊîØÊåÅÂπ∂ÂèëÁöÑÔºå‰ªÖÂú®ÂÜôÊìç‰Ωú‰∏äÂä†‰∫íÊñ•ÈîÅÔºåÊòéÊòæÊèêÂçá‰∫ÜÊïàÁéá„ÄÇ</p>
<h3 id="Once"><a href="#Once" class="headerlink" title="Once"></a>Once</h3><p>Once Ëøô‰∏™ÂØπË±°ÂæàÊúâÁî®ÔºåÂÆÉÊòØ‰∏Ä‰∏™Âè™ÊâßË°å‰∏Ä‰∏™Êìç‰ΩúÁöÑÂØπË±°„ÄÇËØ•ÂØπË±°‰ªÖÊúâ‰∏Ä‰∏™ Do() ÊñπÊ≥ïÔºå‰ªÖÂΩì Once ÂÆû‰æãÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî® Do() ÊñπÊ≥ïÊó∂ÔºåDo() Êâç‰ºöË∞ÉÁî®‰º†ÈÄíËøáÊù•ÁöÑÂáΩÊï∞„ÄÇ</p>
<p>ËøôÂØπ‰∫éË¶ÅÂÆûÁé∞Âçï‰æãÊ®°ÂºèÁöÑ‰ª£Á†Å‰ºöÊñπ‰æø‰∏Ä‰∫õÔºåÂÆö‰πâ‰∏Ä‰∏™ Once ÂØπË±°ÔºåÂ∞ÜË¶ÅÂÆûÁé∞Âçï‰æãÁöÑÂØπË±°ÁöÑÂàùÂßãÂåñÊñπÊ≥ï‰º†ÈÄíÁªô Do()ÔºåÂ∞±ËÉΩ‰øùËØÅÂçï‰æãÁöÑÂπ∂ÂèëÂÆâÂÖ®„ÄÇ</p>
<p>‰ΩÜ‰ΩøÁî®‰∫íÊñ•ÈîÅ‰∏ç‰πüËÉΩËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂêóÔºüÂÖ∂ÂÆû‰∏çÁÑ∂Ôºå‰∫íÊñ•ÈîÅÁöÑ‰ª£‰ª∑Â§™È´òÔºå‰ºöÂØºËá¥ Goroutines Êó†Ê≥ïÂØπËØ•ÂèòÈáèËøõË°åÂπ∂ÂèëËÆøÈóÆ„ÄÇÈÇ£ÊàëÊääÂÆÉÊîπÊàêËØªÂÜôÈîÅÂë¢Ôºü‰æãÂ¶ÇÔºö</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">var mu sync.RWMutex // ÂÆö‰πâËØªÂÜôÈîÅ</span><br><span class="line">var someMap map[string]interface&#123;&#125;</span><br><span class="line"></span><br><span class="line">// Âπ∂ÂèëÂÆâÂÖ®ÁöÑÂçï‰æã</span><br><span class="line">func GetMap(name string) interface&#123;&#125; &#123;</span><br><span class="line">    // Âä†ËØªÈîÅÔºåÂπ∂Âà§Êñ≠ someMap ÊòØÂê¶‰∏∫Á©∫</span><br><span class="line">    // Â¶ÇÊûú‰∏ç‰∏∫Á©∫ÂàôËé∑Âèñ Map ‰∏≠ÁöÑÂÄº</span><br><span class="line">    mu.RLock()</span><br><span class="line">    if someMap != nil &#123;</span><br><span class="line">        foo := someMap[name]</span><br><span class="line">        mu.RUnlock()</span><br><span class="line">        return foo</span><br><span class="line">    &#125;</span><br><span class="line">    // Ê≥®ÊÑèËøôÈáåÊó†Ê≥ïÂú® else ËØ≠Âè•Â∞ÜÂÖ±‰∫´ÈîÅÂçáÁ∫ß‰∏∫‰∫íÊñ•ÈîÅ</span><br><span class="line">    mu.RUnlock()</span><br><span class="line"></span><br><span class="line">    // Â¶ÇÊûú someMap ‰∏∫Á©∫Âä†‰∫íÊñ•ÈîÅÔºåÂπ∂ÂàùÂßãÂåñ someMap</span><br><span class="line">    mu.Lock()</span><br><span class="line"></span><br><span class="line">    // Ê≥®ÊÑèÔºöÂøÖÈ°ªË¶ÅÂÜç‰∏ÄÊ¨°Ê£ÄÊü•ÊòØÂê¶‰∏∫ nil</span><br><span class="line">    if someMap == nil &#123; </span><br><span class="line">        CreateMap()</span><br><span class="line">    &#125;</span><br><span class="line">    foo := someMap[name]</span><br><span class="line">    mu.Unlock()</span><br><span class="line">    return foo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ÁÑ∂ËÄåËøôÁßçÊñπÂºè‰∏çËßâÂæóÂ§™Â§çÊùÇ‰∫ÜÂêóÔºü</p>
<h1 id="Pool"><a href="#Pool" class="headerlink" title="Pool"></a>Pool</h1><p>Pool ÊòØ‰∏ÄÁªÑÁî®Êù•‰øùÂ≠òÊàñËÄÖÊ£ÄÁ¥¢ÁöÑ‰∏¥Êó∂ÂØπË±°„ÄÇPub() ÊñπÊ≥ïÁöÑÂÖ•ÂèÇÊòØÁ©∫Êé•Âè£ÔºåÊÑèÂë≥ÁùÄÂèØ‰ª•Êää‰ªª‰ΩïÁ±ªÂûãÁöÑÂØπË±°ÊîæÁΩÆÂú®Ê±†Â≠ê‰∏≠‰ª•Â§çÁî®ÔºåÂáèËΩªÂûÉÂúæÂõûÊî∂Âô®ÁöÑÂéãÂäõÔºåÊ≠£Á°ÆÁöÑ‰ΩøÁî®ËÉΩÂæàËΩªÊùæÁöÑÊûÑÂª∫È´òÊïà„ÄÅÁ∫øÁ®ãÂÆâÂÖ®ÁöÑËá™Áî±ÂàóË°®„ÄÇ</p>
<h1 id="WaitGroup"><a href="#WaitGroup" class="headerlink" title="WaitGroup"></a>WaitGroup</h1><p>WaitGroup ÈÄÇÁî®‰∫éÁ≠âÂæÖÂ§ö‰∏™ Goroutine ÂÆåÊàêÁöÑÈÄªËæë‰∏ã‰ΩøÁî®ÔºåÊéßÂà∂Â§ö‰∏™ Goroutine ‰πãÈó¥ÁöÑÂêåÊ≠•„ÄÇÊØèÊñ∞Âª∫‰∏Ä‰∏™ Goroutine Â∞±ÂèØ‰ª•Ë∞ÉÁî® WaitGroup.Add() Êù•Â¢ûÂä†ÈúÄË¶ÅÁ≠âÂæÖÁöÑ Goroutine Êï∞ÈáèÔºåÂΩìÊØè‰∏™ Goroutine ÈÉΩËøêË°åÂÆåÊØïÊó∂ÂêÑËá™Ë∞ÉÁî® Done() ÔºåÂèØ‰ª•Âú®Á®ãÂ∫èÁöÑÂ§ñÂ±ÇË∞ÉÁî® Wait() ‰ª•ÈòªÂ°ûÁ®ãÂ∫èÁõ¥Âà∞ÊâÄÊúâ Goroutine ÈÉΩË∞ÉÁî®‰∫Ü Done()„ÄÇ</p>
<p>ËøôÊ†∑Â∞±ÂèØ‰ª•Âú®Á®ãÂ∫è‰∏≠‰ΩøÊØè‰∏™ WaitGroup ‰πãÈó¥ÊòØÂêåÊ≠•ÁöÑÔºå‰ΩÜÊòØ WaitGroup ‰πãÂÜÖÁöÑ Goroutine ÊòØÂºÇÊ≠•ÁöÑ„ÄÇ</p>
<h1 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h1><p>‰∏é WaitGroup ‰∏çÂêåÔºåContext ÂÆûÁé∞‰∫ÜÂØπ‰∏≤Ë°åÁöÑ Goroutine ÁöÑË∑üË∏™ÂíåÊéßÂà∂ÔºåÊØîÂ¶Ç‰∏Ä‰∏™ Goroutine Âú®ËøêË°åËøáÁ®ã‰∏≠Ê¥æÁîüÂá∫‰∫ÜÂÖ∂‰ªñ GoroutineÔºåËøô‰∫õÊ¥æÁîüÂá∫ÁöÑ Goroutine ÂèàÊ¥æÁîüÂá∫‰∫ÜÂÖ∂‰ªñ GoroutineÔºåËøôÁßç Goroutine ÁöÑÂÖ≥Á≥ªÈìæ‰ΩøÁî®‰πãÂâçÁöÑ Channel + Select Êù•Áª¥Êä§‰ºö‰ΩøÂæóÁ®ãÂ∫èÂèòÂæóÂºÇÂ∏∏Â§çÊùÇ„ÄÇËÄå‰ΩøÁî® Context ‰∏ä‰∏ãÊñáÊù•ÂÆûÁé∞ Goroutine Èó¥Êà™Ê≠¢Êó∂Èó¥„ÄÅÂèñÊ∂à‰ø°Âè∑ÊàñÂÖ∂‰ªñÂèòÈáèÁöÑÂÖ±‰∫´Âíå‰º†ÈÄí‰ºöÂèòÂæóÁÆÄÂçï„ÄÇ</p>
<p>Context ÊúâÂõõÁßçÊñπÊ≥ïÊù•Ê¥æÁîüÂá∫‰∏çÂêåÁöÑ‰∏ä‰∏ãÊñáÔºö</p>
<ul>
<li>WithCancel: ‰º†ÈÄíÂèñÊ∂à‰ø°Âè∑</li>
<li>WithDeadline: ‰º†ÈÄíÊà™Ê≠¢Êó∂Èó¥</li>
<li>WithTimeout: ‰º†ÈÄíË∂ÖÊó∂‰ø°Âè∑</li>
<li>WithValue: ‰º†ÈÄíÂÖ∂‰ªñÂÄº</li>
</ul>
<p>‰æãÂ¶Ç WithCancel Ê¥æÁîüÂá∫ÁöÑ‰∏ä‰∏ãÊñáÔºåÂú®ÂØπÂ∫î Goroutine ‰∏≠Ë∞ÉÁî® cancel() ‰ºö‰ΩøÊâÄÊúâÂêå‰∏Ä‰∏ä‰∏ãÊñáÊ¥æÁîüÂá∫ÁöÑÊâÄÊúâ Goroutine ÂÖ≥Èó≠ÔºåÂú®Ê¥æÁîüÂá∫ÁöÑ Goroutine ‰∏≠ÂèØ‰ª•ÈÄöËøáÁõëÂê¨ ctx.Done() Êù•Âà§Êñ≠ÊòØÂê¶ÂÖ≥Èó≠ Goroutine„ÄÇ</p>
<p>Context ËøòÊúâËÆ∏Â§öÂÖ∂‰ªñÁöÑÁî®ÈÄîÔºåÂú® gRPC „ÄÅgin ‰∏≠Â§ßÈáèËøêÁî®‰∫Ü Context„ÄÇContext ÊòØÂπ∂ÂèëÂÆâÂÖ®ÁöÑÔºåÊâÄ‰ª•ÂèØ‰ª•ÊîæÂøÉÁöÑÂú® Goroutines ‰πãÈó¥‰º†ÈÄí„ÄÇ</p>
<p>Âú®GolangÂπ∂ÂèëÁºñÁ®ã‰∏≠ÔºåÂÜÖÂ≠òÊ≥ÑÈú≤Âíå‰∏Ä‰∫õÊ≥®ÊÑè‰∫ãÈ°πÊòØÈúÄË¶ÅÁâπÂà´ÂÖ≥Ê≥®ÁöÑÔºå‰ª•‰∏ãÊòØÂ∏∏ËßÅÁöÑÊÉÖÂÜµÂíåÂª∫ËÆÆÔºö</p>
<h1 id="Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π"><a href="#Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π" class="headerlink" title="Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π"></a>Â∏∏ËßÅÂÜÖÂ≠òÊ≥ÑÈú≤ÂèäÊ≥®ÊÑè‰∫ãÈ°π</h1><ol>
<li><p><strong>goroutineÊ≥ÑÈú≤</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>ÔºögoroutineÂõ†ÈòªÂ°ûÔºàÂ¶ÇÊú™ÂÖ≥Èó≠ÁöÑchannel„ÄÅÊ≠ªÂæ™ÁéØÔºâÊó†Ê≥ïÈÄÄÂá∫ÔºåÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇÊØè‰∏™goroutineÂç†Áî®2KBÂÜÖÂ≠òÔºåÂ§ßÈáègoroutineÊ≥ÑÈú≤‰ºöÈÄ†ÊàêÂÜÖÂ≠òÂç†Áî®ÊåÅÁª≠Â¢ûÂä†„ÄÇ</li>
<li><strong>ÂéüÂõ†</strong>ÔºögoroutineÂú®ÊâßË°åÊó∂Ë¢´ÈòªÂ°ûËÄåÊó†Ê≥ïÈÄÄÂá∫ÔºåÂ¶ÇÊú™ÂÖ≥Èó≠ÁöÑchannelÂØºËá¥Êé•Êî∂Êñπ‰∏ÄÁõ¥Á≠âÂæÖ„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöÁ°Æ‰øùgoroutineÊúâÊòéÁ°ÆÁöÑÈÄÄÂá∫Êú∫Âà∂ÔºåÂ¶Ç‰ΩøÁî®<code>context.Context</code>‰º†ÈÄíÂèñÊ∂à‰ø°Âè∑ÔºåÂÖ≥Èó≠channelÈÄöÁü•ÂçèÁ®ãÈÄÄÂá∫„ÄÇ</li>
</ul>
</li>
<li><p><strong>time.TickerÊú™ÂÖ≥Èó≠</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>Ôºötime.TickerÊØèÈó¥ÈöîÊåáÂÆöÊó∂Èó¥ÂêëÈÄöÈÅìÂÜôÊï∞ÊçÆÔºåËã•‰∏çË∞ÉÁî®<code>Stop()</code>ÊñπÊ≥ïÔºå‰ºö‰∏ÄÁõ¥Âç†Áî®ÂÜÖÂ≠ò„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöÂú®‰ΩøÁî®ÂÆåtime.TickerÂêéÔºåÂä°ÂøÖË∞ÉÁî®<code>Stop()</code>ÊñπÊ≥ïÊù•ÂÅúÊ≠¢ÂÆÉ„ÄÇ</li>
</ul>
</li>
<li><p><strong>Â≠óÁ¨¶‰∏≤ÂíåÂàáÁâáÊà™Âèñ</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>ÔºöÈïøÂ≠óÁ¨¶‰∏≤ÊàñÂàáÁâáË¢´Êà™ÂèñÂêéÔºåÂ¶ÇÊûúÊà™ÂèñÁöÑÂ∞èÈÉ®ÂàÜËøòÂú®Ê¥ªË∑ÉÔºåÂéüÂ§ßÂùóÂÜÖÂ≠òÂ∞ÜÊó†Ê≥ïË¢´ÂõûÊî∂ÔºåÂØºËá¥‰∏¥Êó∂ÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöÂú®‰∏çÈúÄË¶Å‰øùÁïôÂéüÂ§ßÂùóÂÜÖÂ≠òÊó∂ÔºåÂèØ‰ª•Â§çÂà∂ÈúÄË¶ÅÁöÑÈÉ®ÂàÜÂà∞Êñ∞ÁöÑÂèòÈáèÔºåÊàñËÄÖ‰ΩøÁî®ÂÖ∂‰ªñÊñπÂºèÈÅøÂÖçÂÖ±‰∫´Â∫ïÂ±ÇÊï∞ÁªÑ„ÄÇ</li>
</ul>
</li>
<li><p><strong>FinalizerÂØºËá¥Ê≥ÑÊºè</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>ÔºöËÆæÁΩÆFinalizerÂêéÔºåÂØπË±°ÁöÑÂÜÖÂ≠òÊó†Ê≥ïË¢´ÂûÉÂúæÂõûÊî∂Âô®ÂèäÊó∂ÂõûÊî∂ÔºåÂ∞§ÂÖ∂ÂΩìÂ≠òÂú®Âæ™ÁéØÂºïÁî®Êó∂„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöË∞®ÊÖé‰ΩøÁî®FinalizerÔºåÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂæ™ÁéØÂºïÁî®„ÄÇ</li>
</ul>
</li>
<li><p><strong>Deferring Function CallÂØºËá¥Ê≥ÑÊºè</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>ÔºöÂ§ßÈáèÊñá‰ª∂ÊâìÂºÄÂêé‰ªÖÂú®ÂáΩÊï∞ÁªìÊùüÊó∂ÈáäÊîæÔºåÈÄ†Êàê‰∏¥Êó∂ÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöÂú®Âæ™ÁéØ‰∏≠ÊâìÂºÄÊñá‰ª∂Êó∂ÔºåÂ∫îÁ´ãÂç≥ÂÖ≥Èó≠ÔºåËÄå‰∏çÊòØÁ≠âÂæÖÂáΩÊï∞ÁªìÊùü„ÄÇ</li>
</ul>
</li>
<li><p><strong>ÂÜÖÂ≠òÂàÜÈÖçÊú™ÈáäÊîæ</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>ÔºöÊåÅÁª≠ÂàÜÈÖçÂÜÖÂ≠ò‰ΩÜÊú™ÈáäÊîæÔºåÂ¶ÇÊåÅÁª≠ÂêëÂàáÁâá‰∏≠Ê∑ªÂä†Êï∞ÊçÆËÄåÊú™Ê∏ÖÁêÜ„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöÂêàÁêÜÁÆ°ÁêÜÂÜÖÂ≠òÂàÜÈÖçÂíåÈáäÊîæÔºåÈÅøÂÖç‰∏çÂøÖË¶ÅÁöÑÂÜÖÂ≠òÂ†ÜÁßØ„ÄÇ</li>
</ul>
</li>
<li><p><strong>Â§ßÊï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞</strong></p>
<ul>
<li><strong>Âú∫ÊôØ</strong>ÔºöÂ§ßÊï∞ÁªÑ‰Ωú‰∏∫ÂΩ¢ÂèÇÊó∂ÔºåÂÄºÊã∑Ë¥ùÂØºËá¥ÂÜÖÂ≠ò‰ΩøÁî®ÊøÄÂ¢û„ÄÇ</li>
<li><strong>ÈÅøÂÖç</strong>ÔºöÂØπ‰∫éÂ§ßÊï∞ÁªÑÔºå‰ΩøÁî®ÂàáÁâáÊàñÊåáÈíà‰º†ÈÄíÔºåÂáèÂ∞ëÂÜÖÂ≠òÂç†Áî®„ÄÇ</li>
</ul>
</li>
</ol>
<h2 id="Ê≥®ÊÑè‰∫ãÈ°π-2"><a href="#Ê≥®ÊÑè‰∫ãÈ°π-2" class="headerlink" title="Ê≥®ÊÑè‰∫ãÈ°π"></a>Ê≥®ÊÑè‰∫ãÈ°π</h2><ol>
<li><p><strong>Âπ∂ÂèëÂÆâÂÖ®‰∏éÂêåÊ≠•</strong></p>
<ul>
<li>ÂÖ±‰∫´ËµÑÊ∫êÈúÄÁî®<code>sync.Mutex</code>„ÄÅ<code>sync.RWMutex</code>ÊàñÂéüÂ≠êÊìç‰Ωú‰øùÊä§Ôºå‰ºòÂÖà‰ΩøÁî®Channel‰º†ÈÄíÊï∞ÊçÆÔºåÈÅøÂÖçÁõ¥Êé•ÂÖ±‰∫´ÂÜÖÂ≠ò„ÄÇ</li>
</ul>
</li>
<li><p><strong>ÊéßÂà∂Âπ∂ÂèëÈáè</strong></p>
<ul>
<li>ÈÅøÂÖçÊó†ÈôêÂà∂ÂàõÂª∫ÂçèÁ®ãÔºå‰ΩøÁî®Â∏¶ÁºìÂÜ≤ÁöÑChannel„ÄÅWorker PoolÊàñ‰ø°Âè∑ÈáèÈôêÂà∂Âπ∂ÂèëÊï∞„ÄÇ</li>
</ul>
</li>
<li><p><strong>Â§ÑÁêÜÂçèÁ®ãÈîôËØØ</strong></p>
<ul>
<li>Âú®goroutineÂÜÖÈÉ®‰ΩøÁî®<code>defer</code>+<code>recover</code>Â§ÑÁêÜ<code>panic</code>ÔºåÈÅøÂÖçÊï¥‰∏™Á®ãÂ∫èÂ¥©Ê∫É„ÄÇ</li>
</ul>
</li>
<li><p><strong>ÈÅøÂÖçChannelÊ≠ªÈîÅ</strong></p>
<ul>
<li>Á°Æ‰øùChannelÁöÑÂèëÈÄÅÂíåÊé•Êî∂ÊàêÂØπÂá∫Áé∞ÔºåÈÅøÂÖçÂçèÁ®ãÊ∞∏‰πÖÈòªÂ°ûÔºåÂ¶ÇÊú™ÂÖ≥Èó≠ÁöÑChannelÂèØËÉΩÂØºËá¥Êé•Êî∂ÊñπÁ≠âÂæÖ„ÄÇ</li>
</ul>
</li>
<li><p><strong>Âà©Áî®Context‰º†ÈÄíÂÖÉÊï∞ÊçÆÂíåÂèñÊ∂à‰ø°Âè∑</strong></p>
<ul>
<li>‰ΩøÁî®<code>context.Context</code>‰º†ÈÄíÂÖÉÊï∞ÊçÆÂíåÂèñÊ∂à‰ø°Âè∑ÔºåÊñπ‰æøÊéßÂà∂goroutineÁöÑÁîüÂëΩÂë®Êúü„ÄÇ</li>
</ul>
</li>
<li><p><strong>ÂêàÁêÜ‰ΩøÁî®ÈîÅ</strong></p>
<ul>
<li>ÈÅøÂÖçÂú®ÊåÅÊúâÈîÅÁöÑÊÉÖÂÜµ‰∏ãË∞ÉÁî®ÂèØËÉΩÂØºËá¥ÈòªÂ°ûÁöÑÊìç‰ΩúÔºåÂ¶ÇI&#x2F;OÊìç‰ΩúÔºåÈò≤Ê≠¢Ê≠ªÈîÅ„ÄÇ</li>
</ul>
</li>
<li><p><strong>ÁõëÊéßÂíåÂàÜÊûê</strong></p>
<ul>
<li>‰ΩøÁî®<code>runtime.MemStats</code>ÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµÔºå‰ΩøÁî®<code>pprof</code>ËøõË°åÊÄßËÉΩÂàÜÊûêÔºåÂèäÊó∂ÂèëÁé∞ÂíåËß£ÂÜ≥ÂÜÖÂ≠òÂíåÊÄßËÉΩÈóÆÈ¢ò„ÄÇ</li>
</ul>
</li>
</ol>
<p>ÈÄöËøáÈÅµÂæ™‰ª•‰∏äÂª∫ËÆÆÂíåÊ≥®ÊÑè‰∫ãÈ°πÔºåÂèØ‰ª•ÊúâÊïàÈÅøÂÖçGolangÂπ∂ÂèëÁºñÁ®ã‰∏≠ÁöÑÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢òÔºåÁºñÂÜôÂá∫È´òÊïà„ÄÅÁ®≥ÂÆöÁöÑÂπ∂ÂèëÁ®ãÂ∫è„ÄÇ</p>

</article>
    
    <div class="trm-reward">
        
            <span class="trm-reward-btn trm-glow" onclick='var qr = document.getElementById("qr"); qr.style.display = (qr.style.display === "none") ? "block" : "none";'>
                <i class="iconfont fas fa-hand-holding-usd"></i>
            </span>
        
        <p class="trm-reward-comment">Ëµ†‰∫∫Áé´Áë∞ÔºåÊâãÊúâ‰ΩôÈ¶ô„ÄÇ</p>
        <div id="qr" style="display:none;">
            
                <div style="display:inline-block">
                    <a rel="noopener noreferrer" href='https://i.328888.xyz/2023/04/22/i5cWsV.md.jpeg' target='_blank' >
                       <img src="https://i.328888.xyz/2023/04/22/i5cWsV.md.jpeg" alt="ÊîØ‰ªòÂÆù" loading="lazy">
                    </a>
                    <p>ÊîØ‰ªòÂÆù</p>
                </div>
            
                <div style="display:inline-block">
                    <a rel="noopener noreferrer" href='https://i.328888.xyz/2023/04/22/i5c0fd.th.jpeg' target='_blank' >
                       <img src="https://i.328888.xyz/2023/04/22/i5c0fd.th.jpeg" alt="ÂæÆ‰ø°" loading="lazy">
                    </a>
                    <p>ÂæÆ‰ø°</p>
                </div>
            
        </div>
    </div>

    

<ul class="trm-post-copyright">
    <li class="trm-post-copyright-author">
        <strong>Post author: </strong>
        Ë¥∫ÂêåÂ≠¶
    </li>
    <li class="trm-post-copyright-link">
        <strong>Post link: </strong>
        <a id="original-link" href="https://herongwei.me/2025/03/28/Golang-Âπ∂ÂèëÁºñÁ®ãÂÆûÊàòÊÄªÁªì/" title="Golang Âπ∂ÂèëÁºñÁ®ãÂÆûÊàòÊÄªÁªì">https://herongwei.me/2025/03/28/Golang-Âπ∂ÂèëÁºñÁ®ãÂÆûÊàòÊÄªÁªì/</a>
    </li>
    <li class="trm-post-copyright-license">
        <strong>Copyright Notice: </strong>
        All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 ">CC BY-NC-SA 4.0</a> unless otherwise stated.
    </li>
</ul>


</div>
<div id="post-next-prev" class="row">
    <div class="col-lg-12">
        <!-- title -->
        <h5 class="trm-title-with-divider">
            Other Articles
            <span data-number="02"></span>
        </h5>
    </div>
    
    
        <div class="col-lg-6">
    <div class="trm-blog-card trm-scroll-animation" data-scroll data-scroll-offset="40">
        <a href="/2025/03/24/Rust-%E9%AB%98%E6%80%A7%E8%83%BD%E5%8E%9F%E5%9B%A0%E8%A7%A3%E6%9E%90/" class="trm-cover-frame trm-anima-link">
            
            
                <img alt="cover" class="no-fancybox" src="/img/block.jpg">
            
        </a>
        
        <div class="trm-card-descr">
            <div class="trm-label trm-category trm-mb-20">
                <a href=" /categories/%E5%8D%9A%E5%AE%A2/">
                    ÂçöÂÆ¢
                </a>
            </div>
            <h5>
                <a href="/2025/03/24/Rust-%E9%AB%98%E6%80%A7%E8%83%BD%E5%8E%9F%E5%9B%A0%E8%A7%A3%E6%9E%90/" class="trm-anima-link">
                    Rust È´òÊÄßËÉΩÂéüÂõ†Ëß£Êûê
                </a>
            </h5>
            <div class="trm-divider trm-mb-20 trm-mt-20"></div>
            <ul class="trm-card-data trm-label">
                <li>25/03/24</li>
                <li>18:07</li>
                
                
            </ul>
        </div>
    </div>
</div>
    
</div>

    



                    <div class="trm-divider footer-divider"></div>

                    <!-- footer -->
                    <footer class="trm-scroll-animation" data-scroll data-scroll-offset="50">

    

    
        <div class="trm-footer-item">
            <span>¬© 2023- 2025</span>
            <span class="footer-separator"data-separator=" ¬∑ "></span>
            <span class="trm-accent-color">Á®ãÂ∫èÂëòË¥∫ÂêåÂ≠¶</span>
        </div>
    

    
        <div class="trm-footer-item">
            <span>
                Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v6.3.0
            </span>
            <span class="footer-separator" data-separator=" | "></span>
            <span> 
                Theme - 
                <a rel="noopener" href='https://github.com/MaLuns/hexo-theme-async' target='_blank'>Async</a>
                v2.0.8
            </span>
        </div>
      

    
        <div class="trm-footer-item">
            The blog has been lovely to run <span id="since" class="trm-accent-color"></span> day
        </div>
     

     
</footer>

<script>
    function show_date_time () {
        var BirthDay = new Date("04/10/2023 17:00:00");
        var today = new Date();
        var timeold = (today.getTime() - BirthDay.getTime());
        var msPerDay = 24 * 60 * 60 * 1000
        var day = Math.floor(timeold / msPerDay)
        since.innerHTML = day
    }
    show_date_time()
</script>
 
                    <!-- footer end -->

                </div>
            </div>
        </div>
    </div>
</div>
            <!-- body end -->

            <div class="trm-fixed-container" data-scroll data-scroll-sticky data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="-10">
    
        <div class="trm-fixed-btn" data-title="Read Mode" onclick="asyncFun.switchReadMode()">
            <i class="iconfont fas fa-book-reader"></i>
        </div>
    
    
    <div id="trm-back-top" class="trm-fixed-btn" data-title="Back To Top">
        <i class="iconfont fas fa-arrow-up"></i>
    </div>
</div>
          </div>
        </div>
      </div>
      <!-- scroll container end -->

  </div>
  <!-- app wrapper end -->

  
  <!-- Plugin -->




    
    
<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>

    
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>

    

    
        <script src="https://cdn.jsdelivr.net/npm/hexo-theme-async@2.0.8/source/js/plugins/typing.js?v=2.0.8"></script>
    

    

    <!-- Êï∞Â≠¶ÂÖ¨Âºè -->
    

    <!-- ËØÑËÆ∫Êèí‰ª∂ -->
    
        

        
    



<!-- CDN -->


    

    

    




    <!-- Service Worker -->
    
    <!-- baidu push -->
    


<script id="async-script" src="https://cdn.jsdelivr.net/npm/hexo-theme-async@2.0.8/source/js/main.js?v=2.0.8"></script>

</body>

</html>